{
  "hash": "1ccfa1ab9389d038522edff89f577d04",
  "result": {
    "markdown": "---\ntitle: \"Predicting bike ridership: developing a model\"\ndescription: |\n  Part 2 of predicting bike ridership in Halifax, Nova Scotia. In this post,\n  I explore and tune different modeling approaches.\ndate: 2022-04-29\nparams:\n  date: 2022-04-29\n  slug: \"predicting-bike-ridership-developing-a-model\"\ncategories:\n  - R\n  - machine learning\n  - tidymodels\n  - random forest\n  - XGBoost\n  - support-vector machine\n  - forecasting\nimage: preview.png\nbibliography: references.bib\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"R setup\"}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(patchwork)\nlibrary(tidymodels)\nlibrary(tictoc)\n\nlibrary(dunnr)\nextrafont::loadfonts(device = \"win\", quiet = TRUE)\ntheme_set(theme_td())\nset_geom_fonts()\nset_palette()\n```\n:::\n\n\n## Introduction\n\nIn [my last post](../2022-04-27-predicting-bike-ridership-getting-the-data), I retrieved, explored, and prepared bike counter data from Halifax, Nova Scotia.\nI also got some historical weather data to go along with it.\nHere, I will further explore the data, engineer some features, and fit and evaluate many models to predict bike ridership at different sites around the city.\n\n## Exploratory data analysis\n\nImport the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership <- read_rds(\"bike-ridership-data.rds\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(bike_ridership)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,840\nColumns: 9\n$ site_name           <chr> \"Dartmouth Harbourfront Greenway\", \"Dartmouth Harb…\n$ installation_date   <date> 2021-07-08, 2021-07-08, 2021-07-08, 2021-07-08, 2…\n$ count_date          <date> 2021-07-08, 2021-07-09, 2021-07-10, 2021-07-11, 2…\n$ n_records           <int> 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48, 48…\n$ n_bikes             <int> 130, 54, 180, 245, 208, 250, 182, 106, 152, 257, 1…\n$ mean_temperature    <dbl> 18.2, 17.6, 21.0, 21.0, 20.6, 18.6, 17.7, 20.2, 20…\n$ total_precipitation <dbl> 0.6, 10.0, 0.4, 0.0, 0.0, 0.0, 0.0, 11.6, 0.2, 0.4…\n$ speed_max_gust      <int> NA, 54, 56, NA, NA, NA, NA, 32, 37, NA, NA, NA, NA…\n$ snow_on_ground      <int> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n```\n:::\n:::\n\n\nThis data consists of daily bike counts (`n_bikes`) over a 24 hour period (`count_date`) recorded at 5 sites (`site_name`) around the city.\nIn the original data, counts are recorded every hour which is reflected by the `n_records` variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership %>%\n  count(site_name, n_records) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"tiqdllzjtx\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#tiqdllzjtx .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#tiqdllzjtx .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#tiqdllzjtx .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#tiqdllzjtx .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#tiqdllzjtx .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#tiqdllzjtx .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#tiqdllzjtx .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#tiqdllzjtx .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#tiqdllzjtx .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#tiqdllzjtx .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#tiqdllzjtx .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#tiqdllzjtx .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#tiqdllzjtx .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tiqdllzjtx .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#tiqdllzjtx .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#tiqdllzjtx .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tiqdllzjtx .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#tiqdllzjtx .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tiqdllzjtx .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#tiqdllzjtx .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tiqdllzjtx .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#tiqdllzjtx .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#tiqdllzjtx .gt_left {\n  text-align: left;\n}\n\n#tiqdllzjtx .gt_center {\n  text-align: center;\n}\n\n#tiqdllzjtx .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#tiqdllzjtx .gt_font_normal {\n  font-weight: normal;\n}\n\n#tiqdllzjtx .gt_font_bold {\n  font-weight: bold;\n}\n\n#tiqdllzjtx .gt_font_italic {\n  font-style: italic;\n}\n\n#tiqdllzjtx .gt_super {\n  font-size: 65%;\n}\n\n#tiqdllzjtx .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#tiqdllzjtx .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#tiqdllzjtx .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#tiqdllzjtx .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#tiqdllzjtx .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#tiqdllzjtx .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">site_name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">n_records</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">n</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">Dartmouth Harbourfront Greenway</td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">Dartmouth Harbourfront Greenway</td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">291</td></tr>\n    <tr><td class=\"gt_row gt_left\">Hollis St</td>\n<td class=\"gt_row gt_right\">4</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">Hollis St</td>\n<td class=\"gt_row gt_right\">24</td>\n<td class=\"gt_row gt_right\">656</td></tr>\n    <tr><td class=\"gt_row gt_left\">South Park St</td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">South Park St</td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">884</td></tr>\n    <tr><td class=\"gt_row gt_left\">Vernon St</td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">Vernon St</td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">502</td></tr>\n    <tr><td class=\"gt_row gt_left\">Windsor St</td>\n<td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">Windsor St</td>\n<td class=\"gt_row gt_right\">48</td>\n<td class=\"gt_row gt_right\">502</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n[All except the Hollis St site have two channels](../2022-04-27-predicting-bike-ridership-getting-the-data/#eda-and-cleaning) (northbound and southbound), which is why `n_records` = 48.\nThe entries with fewer `n_records` reflect the time of day that the data was extracted:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership %>%\n  filter(n_records < 24) %>%\n  select(site_name, count_date, n_records) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"jgilkfreal\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#jgilkfreal .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#jgilkfreal .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#jgilkfreal .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#jgilkfreal .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#jgilkfreal .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#jgilkfreal .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#jgilkfreal .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#jgilkfreal .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jgilkfreal .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#jgilkfreal .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#jgilkfreal .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#jgilkfreal .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#jgilkfreal .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgilkfreal .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#jgilkfreal .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#jgilkfreal .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgilkfreal .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#jgilkfreal .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgilkfreal .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#jgilkfreal .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgilkfreal .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#jgilkfreal .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#jgilkfreal .gt_left {\n  text-align: left;\n}\n\n#jgilkfreal .gt_center {\n  text-align: center;\n}\n\n#jgilkfreal .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#jgilkfreal .gt_font_normal {\n  font-weight: normal;\n}\n\n#jgilkfreal .gt_font_bold {\n  font-weight: bold;\n}\n\n#jgilkfreal .gt_font_italic {\n  font-style: italic;\n}\n\n#jgilkfreal .gt_super {\n  font-size: 65%;\n}\n\n#jgilkfreal .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#jgilkfreal .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#jgilkfreal .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#jgilkfreal .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#jgilkfreal .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#jgilkfreal .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">site_name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">count_date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">n_records</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">Dartmouth Harbourfront Greenway</td>\n<td class=\"gt_row gt_left\">2022-04-25</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n    <tr><td class=\"gt_row gt_left\">Hollis St</td>\n<td class=\"gt_row gt_left\">2022-04-25</td>\n<td class=\"gt_row gt_right\">4</td></tr>\n    <tr><td class=\"gt_row gt_left\">South Park St</td>\n<td class=\"gt_row gt_left\">2022-04-25</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n    <tr><td class=\"gt_row gt_left\">Vernon St</td>\n<td class=\"gt_row gt_left\">2022-04-25</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n    <tr><td class=\"gt_row gt_left\">Windsor St</td>\n<td class=\"gt_row gt_left\">2022-04-25</td>\n<td class=\"gt_row gt_right\">8</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nFor this analysis, I will exclude this incomplete day:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership <- bike_ridership %>% filter(n_records > 8)\n```\n:::\n\n\nThe date ranges for each site:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership %>%\n  group_by(site_name) %>%\n  summarise(\n    min_date = min(count_date), max_date = max(count_date),\n    n_days = n(), .groups = \"drop\"\n  ) %>%\n  mutate(\n    site_name = fct_reorder(site_name, min_date),\n    n_days_label = ifelse(site_name == levels(site_name)[1],\n                          str_c(\"n_days = \", n_days), n_days),\n    midpoint_date = min_date + n_days / 2\n  ) %>%\n  ggplot(aes(y = site_name, color = site_name)) +\n  geom_linerange(aes(xmin = min_date, xmax = max_date)) +\n  geom_point(aes(x = min_date)) +\n  geom_point(aes(x = max_date)) +\n  geom_text(aes(label = n_days_label, x = midpoint_date), vjust = -0.5) +\n  scale_y_discrete(labels = ~ str_wrap(., width = 15)) +\n  labs(y = NULL, x = \"min_date -> max_date\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-8-1.png){width=480}\n:::\n:::\n\n\nBefore any more EDA, I'll split the data into training and testing sets (and only look at the training data going forward).\nFor time series data, there is the `rsample::initial_time_split()` function, which I'll use to make a 70-30 split:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Need to order by time to properly use time split\nbike_ridership <- bike_ridership %>% arrange(count_date, site_name)\n\nbike_split <- initial_time_split(bike_ridership, prop = 0.7)\n\nbike_train <- training(bike_split)\nbike_test <- testing(bike_split)\n\nbind_rows(\n  train = bike_train, test = bike_test, .id = \"data_set\"\n) %>%\n  group_by(data_set, site_name) %>%\n  summarise(\n    min_date = min(count_date), max_date = max(count_date),\n    n_days = n(), midpoint_date = min_date + n_days / 2,\n    .groups = \"drop\"\n  ) %>%\n  ggplot(aes(y = fct_reorder(site_name, min_date), color = data_set)) +\n  geom_linerange(aes(xmin = min_date, xmax = max_date),\n                 position = position_dodge(0.2)) +\n  geom_point(aes(x = min_date), position = position_dodge(0.2)) +\n  geom_point(aes(x = max_date), position = position_dodge(0.2)) +\n  geom_text(aes(label = n_days, x = midpoint_date), vjust = -0.5,\n            position = position_dodge(0.2), show.legend = FALSE) +\n  labs(x = \"date range\", y = NULL, color = NULL)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nIt might make more sense to stratify by `site_name` so that there is a 70-30 split in each site.^[Since `initial_time_split()` doesn't take `strata` argument, this would require defining a custom split function with `rsample::make_splits()`. This functionality might be available in future versions of `rsample` (see [this issue](https://github.com/tidymodels/rsample/issues/207)).]\nFor now, I'm using a simpler approach to split into the first 70% and 30% of the data.\n\nFor each site, the distribution of daily `n_bikes`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  ggplot(aes(x = n_bikes, fill = site_name)) +\n  geom_histogram(bins = 30) +\n  facet_wrap(~ str_trunc(site_name, 25)) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\nThe South Park St site appears bimodal, which [I noted in part 1](../2022-04-27-predicting-bike-ridership-getting-the-data#eda-and-cleaning) was likely due to the addition of protected bike lanes in 2021.\nThis can be seen more clearly in the trend over time:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  ggplot(aes(x = count_date, y = n_bikes, color = site_name)) +\n  geom_line() +\n  facet_wrap(~ site_name, ncol = 1) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-11-1.png){width=576}\n:::\n:::\n\n\nAs you would expect for data in the same city, bike counters between sites are very highly correlated, which I can visualize:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  transmute(count_date, n_bikes1 = n_bikes,\n            site_name1 = factor(str_trunc(site_name, 10))) %>%\n  left_join(., rename(., n_bikes2 = n_bikes1, site_name2 = site_name1),\n            by = \"count_date\") %>%\n  filter(as.numeric(site_name1) < as.numeric(site_name2)) %>%\n  ggplot(aes(x = n_bikes1, y = n_bikes2)) +\n  geom_point(aes(color = site_name1), alpha = 0.3) +\n  facet_grid(site_name2 ~ site_name1) +\n  theme(legend.position = \"none\") +\n  dunnr::add_facet_borders()\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nThe day of the week effect looks important:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  mutate(day_of_week = lubridate::wday(count_date, label = TRUE)) %>%\n  ggplot(aes(x = day_of_week, y = n_bikes)) +\n  geom_jitter(aes(color = site_name), height = 0, width = 0.2, alpha = 0.3) +\n  stat_summary(fun = \"mean\", geom = \"point\") +\n  facet_wrap(~ str_trunc(site_name, 30)) +\n  theme(legend.position = \"none\") +\n  dunnr::add_facet_borders()\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\nAnother thing to consider is holidays.\nI can get Canadian holidays with the `timeDate` package (this is how `recipes::step_holiday()` works):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(timeDate)\ncanada_holidays <-\n  timeDate::listHolidays(\n    pattern = \"^CA|^Christmas|^NewYears|Easter[Sun|Mon]|^GoodFriday|^CaRem\"\n  )\ncanada_holidays\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"CACanadaDay\"              \"CACivicProvincialHoliday\"\n [3] \"CALabourDay\"              \"CaRemembranceDay\"        \n [5] \"CAThanksgivingDay\"        \"CAVictoriaDay\"           \n [7] \"ChristmasDay\"             \"ChristmasEve\"            \n [9] \"EasterMonday\"             \"EasterSunday\"            \n[11] \"GoodFriday\"               \"NewYearsDay\"             \n```\n:::\n:::\n\n\nThen get the dates for each across the years in the bike data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncanada_holiday_dates <- tibble(holiday = canada_holidays) %>%\n  crossing(year = 2019:2022) %>%\n  mutate(\n    holiday_date = map2(\n      year, holiday,\n      ~ as.Date(timeDate::holiday(.x, .y)@Data)\n    )\n  ) %>%\n  unnest(holiday_date)\n\ncanada_holiday_dates %>%\n  select(holiday, holiday_date) %>%\n  rmarkdown::paged_table()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"holiday\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"holiday_date\"],\"name\":[2],\"type\":[\"date\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"CACanadaDay\",\"2\":\"2019-07-01\"},{\"1\":\"CACanadaDay\",\"2\":\"2020-07-01\"},{\"1\":\"CACanadaDay\",\"2\":\"2021-07-01\"},{\"1\":\"CACanadaDay\",\"2\":\"2022-07-01\"},{\"1\":\"CACivicProvincialHoliday\",\"2\":\"2019-08-05\"},{\"1\":\"CACivicProvincialHoliday\",\"2\":\"2020-08-03\"},{\"1\":\"CACivicProvincialHoliday\",\"2\":\"2021-08-02\"},{\"1\":\"CACivicProvincialHoliday\",\"2\":\"2022-08-01\"},{\"1\":\"CALabourDay\",\"2\":\"2019-09-02\"},{\"1\":\"CALabourDay\",\"2\":\"2020-09-07\"},{\"1\":\"CALabourDay\",\"2\":\"2021-09-06\"},{\"1\":\"CALabourDay\",\"2\":\"2022-09-05\"},{\"1\":\"CaRemembranceDay\",\"2\":\"2019-11-11\"},{\"1\":\"CaRemembranceDay\",\"2\":\"2020-11-11\"},{\"1\":\"CaRemembranceDay\",\"2\":\"2021-11-11\"},{\"1\":\"CaRemembranceDay\",\"2\":\"2022-11-11\"},{\"1\":\"CAThanksgivingDay\",\"2\":\"2019-10-14\"},{\"1\":\"CAThanksgivingDay\",\"2\":\"2020-10-12\"},{\"1\":\"CAThanksgivingDay\",\"2\":\"2021-10-11\"},{\"1\":\"CAThanksgivingDay\",\"2\":\"2022-10-10\"},{\"1\":\"CAVictoriaDay\",\"2\":\"2019-05-20\"},{\"1\":\"CAVictoriaDay\",\"2\":\"2020-05-18\"},{\"1\":\"CAVictoriaDay\",\"2\":\"2021-05-24\"},{\"1\":\"CAVictoriaDay\",\"2\":\"2022-05-23\"},{\"1\":\"ChristmasDay\",\"2\":\"2019-12-25\"},{\"1\":\"ChristmasDay\",\"2\":\"2020-12-25\"},{\"1\":\"ChristmasDay\",\"2\":\"2021-12-25\"},{\"1\":\"ChristmasDay\",\"2\":\"2022-12-25\"},{\"1\":\"ChristmasEve\",\"2\":\"2019-12-24\"},{\"1\":\"ChristmasEve\",\"2\":\"2020-12-24\"},{\"1\":\"ChristmasEve\",\"2\":\"2021-12-24\"},{\"1\":\"ChristmasEve\",\"2\":\"2022-12-24\"},{\"1\":\"EasterMonday\",\"2\":\"2019-04-22\"},{\"1\":\"EasterMonday\",\"2\":\"2020-04-13\"},{\"1\":\"EasterMonday\",\"2\":\"2021-04-05\"},{\"1\":\"EasterMonday\",\"2\":\"2022-04-18\"},{\"1\":\"EasterSunday\",\"2\":\"2019-04-21\"},{\"1\":\"EasterSunday\",\"2\":\"2020-04-12\"},{\"1\":\"EasterSunday\",\"2\":\"2021-04-04\"},{\"1\":\"EasterSunday\",\"2\":\"2022-04-17\"},{\"1\":\"GoodFriday\",\"2\":\"2019-04-19\"},{\"1\":\"GoodFriday\",\"2\":\"2020-04-10\"},{\"1\":\"GoodFriday\",\"2\":\"2021-04-02\"},{\"1\":\"GoodFriday\",\"2\":\"2022-04-15\"},{\"1\":\"NewYearsDay\",\"2\":\"2019-01-01\"},{\"1\":\"NewYearsDay\",\"2\":\"2020-01-01\"},{\"1\":\"NewYearsDay\",\"2\":\"2021-01-01\"},{\"1\":\"NewYearsDay\",\"2\":\"2022-01-01\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nOnly day I can think is missing from this list is Family Day (Heritage Day in Nova Scotia) which is the third Monday in February.\nVisualize the effect of these holidays on bike ridership by plotting `n_bikes` in a 2 week window around the holidays (showing just the South Park St site for this plot):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncanada_holiday_dates %>%\n  filter(holiday_date %in% unique(bike_train$count_date)) %>%\n  mutate(\n    date_window = map(holiday_date, ~ seq.Date(.x - 7, .x + 7, by = \"1 day\"))\n  ) %>%\n  unnest(date_window) %>%\n  left_join(\n    bike_train, by = c(\"date_window\" = \"count_date\")\n  ) %>%\n  mutate(is_holiday = holiday_date == date_window) %>%\n  group_by(holiday) %>%\n  mutate(day_from_holiday = as.numeric(holiday_date - date_window)) %>%\n  ungroup() %>%\n  filter(site_name == \"South Park St\") %>%\n  ggplot(aes(x = day_from_holiday, y = n_bikes,\n             group = factor(year))) +\n  geom_line() +\n  geom_vline(xintercept = 0, lty = 2) +\n  geom_point(aes(color = factor(year))) +\n  facet_wrap(~ holiday) +\n  labs(color = \"year\") +\n  dunnr::add_facet_borders() +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nThe only holidays with a clear drop in ridership are Labour Day and the Civic Holiday (called Natal Day in NS) in 2021.\nVictoria Day seems to have the opposite effect.\nThe Good Friday, Easter Sunday and Easter Monday holidays are obviously overlapping, and the `n_bikes` trend is a bit of a mess, but I can see an indication to the left of Good Friday that there may be a drop in ridership going into that weekend.\n\nOne thing to note is that the first, middle and last points correspond to the same day of the week, and the middle point in this set is usually lower than those two point, so holidays may be useful features in conjunction with day of the week.\n\nThe weather variables have varying levels of completeness:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Separate out the weather data\nweather_data <- bike_train %>%\n  distinct(count_date, mean_temperature, total_precipitation,\n           speed_max_gust, snow_on_ground)\n\nweather_data %>%\n  mutate(across(where(is.numeric), is.na)) %>%\n  pivot_longer(cols = -count_date) %>%\n  ggplot(aes(x = count_date, y = name)) +\n  geom_tile(aes(fill = value)) +\n  labs(y = NULL, x = NULL, fill = \"Missing\") +\n  scale_fill_manual(values = c(td_colors$nice$indigo_blue, \"gray80\")) +\n  scale_x_date(expand = c(0, 0)) +\n  scale_y_discrete(expand = c(0, 0)) +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-17-1.png){width=480}\n:::\n:::\n\n\nThe distributions:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_data %>%\n  pivot_longer(cols = -count_date) %>%\n  filter(!is.na(value)) %>%\n  ggplot(aes(x = value, fill = name)) +\n  geom_histogram(bins = 20) +\n  scale_y_continuous(expand = c(0, 0)) +\n  facet_wrap(~ name, nrow = 1, scales = \"free\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-18-1.png){width=576}\n:::\n:::\n\n\nFor non-missing cases, plot the pairwise relationships:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_data %>%\n  pivot_longer(cols = -count_date, names_to = \"var1\", values_to = \"val1\") %>%\n  mutate(var1 = factor(var1)) %>%\n  left_join(., rename(., var2 = var1, val2 = val1),\n            by = \"count_date\") %>%\n  filter(!is.na(val1), !is.na(val2),\n         # Use numeric factor labels to remove duplicates\n         as.numeric(var1) < as.numeric(var2)) %>%\n  ggplot(aes(x = val1, y = val2, color = var1)) +\n  geom_point(alpha = 0.5) +\n  facet_grid(var2 ~ var1, scales = \"free\") +\n  theme(legend.position = \"none\") +\n  dunnr::add_facet_borders()\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\nThe clearest relationship to me is unsurprising: increasing `mean_temperature` is associated with decreasing `snow_on_ground` (top left plot).\n\nVisualize relationships with `n_bikes`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  pivot_longer(\n    cols = c(mean_temperature, total_precipitation,\n             speed_max_gust, snow_on_ground),\n    names_to = \"var\", values_to = \"val\"\n  ) %>%\n  filter(!is.na(val)) %>%\n  ggplot(aes(x = val, y = n_bikes)) +\n  geom_point(aes(color = str_trunc(site_name, 15)), alpha = 0.4) +\n  facet_wrap(~ var, nrow = 2, scales = \"free_x\") +\n  dunnr::add_facet_borders() +\n  labs(x = NULL, color = NULL) +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nAll of the weather variables seem to be have a relationship with `n_bikes`.\nIn terms of predictive value, `mean_temperature` looks like it might be the most useful, and `speed_max_gust` the least.\n\n## Feature engineering\n\nFrom my EDA, I decided I want try including all 4 weather variables to predict bike ridership.\nThis will require imputation of missing values for all 4, which I'll attempt here.\n\nAdd some more time variables for working with the `weather_data`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_data <- weather_data %>%\n  mutate(count_year = lubridate::year(count_date),\n         # Day number relative to earliest date\n         count_day = as.numeric(count_date - min(count_date)),\n         # Day of the year, from 1 to 365\n         count_yday = lubridate::yday(count_date))\n```\n:::\n\n\n### Temperature\n\nThe `mean_temperature` variable is missing 3% of values.\nVisualize the trend over time:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- weather_data %>%\n  filter(!is.na(mean_temperature)) %>%\n  ggplot(aes(x = count_date, y = mean_temperature)) +\n  geom_line(aes(color = factor(count_year))) +\n  scale_color_viridis_d(\"year\") +\n  scale_x_date(\"date\", date_breaks = \"1 year\")\np2 <- weather_data %>%\n  filter(!is.na(mean_temperature)) %>%\n  ggplot(aes(x = count_yday, y = mean_temperature)) +\n  geom_line(aes(color = factor(count_year))) +\n  scale_color_viridis_d(\"year\") +\n  scale_x_continuous(\"day of year\", breaks = c(0, 90, 180, 270, 365)) +\n  labs(y = NULL)\np1 + p2 +\n  plot_layout(guides = \"collect\") &\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\nThe cyclic nature makes it a good candidate for smoothing splines.\nAs a starting point, try a natural spline with 5 knots on the `count_yday` variable:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(splines)\nlm_temperature <- \n  lm(mean_temperature ~ ns(count_yday, knots = 5),\n      data = filter(weather_data, !is.na(mean_temperature)))\n\np1 +\n  geom_line(\n    data = augment(lm_temperature, newdata = weather_data),\n    aes(y = .fitted), size = 1\n  ) +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\nWe can obviously do a lot better, especially at the yearly boundaries.\nI'll fit the data using a generalized additive model (GAM) with the `mgcv` package.^[Check out [this blog post by Gavin Simpson](https://fromthebottomoftheheap.net/2014/05/09/modelling-seasonal-data-with-gam/) for a great walkthrough of modeling seasonal data with GAMs.]\nFor the `count_yday` variable (ranges from 1-365), I'll make sure that there is no discontinuity between year by using a *cyclic* spline (`bs = \"cc\"`).\nI'll also include a smoothing term of `count_day` which will capture the trend across years.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(mgcv)\n\ngam_temperature <-\n  gam(mean_temperature ~ s(count_yday, bs = \"cc\", k = 12) + s(count_day),\n      data = filter(weather_data, !is.na(mean_temperature)))\nplot(gam_temperature, pages = 1, shade = TRUE)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\nThe left plot shows the seasonal trend within a year (note the lines would connect at `count_yday` = 1 and 365), and the right plot shows the increase in average temperature throughout time (across years) after accounting for the seasonal effect.\nOverlay the fit:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 +\n  geom_line(\n    data = augment(gam_temperature, newdata = weather_data),\n    aes(y = .fitted), size = 1\n  ) +\n  theme(legend.position = \"top\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\nI'm pretty happy with that.\nI'll use predictions from this GAM to impute missing daily temperatures.\n\n### Precipitation and snow\n\nThe `total_precipitation` variable is missing\n36% of values;\n76% for `snow_on_ground`.\n\nThe `total_precipitation` distribution:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- weather_data %>%\n  mutate(total_precipitation = replace_na(total_precipitation, -5)) %>%\n  ggplot(aes(x = count_date, y = total_precipitation)) +\n  geom_point(alpha = 0.5) +\n  scale_y_continuous(breaks = c(-5, 0, 20, 40, 60),\n                     labels = c(\"missing\", 0, 20, 40, 60))\np1\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-26-1.png){width=480}\n:::\n:::\n\n\nThis pattern of missing data during winter months makes me think that the `total_precipitation` is actually total rainfall, i.e. snowfall is not counted.\nI'm going to impute the missing values with 0 during pre-processing, which is admittedly a poor approximation of the truth.\n\nThe `snow_on_ground` distribution:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np2 <- weather_data %>%\n  mutate(snow_on_ground = replace_na(snow_on_ground, -2)) %>%\n  ggplot(aes(x = count_date, y = snow_on_ground)) +\n  geom_point(alpha = 0.5) +\n  scale_y_continuous(breaks = c(-2, 0, 10, 20),\n                     labels = c(\"missing\", 0, 10, 20))\np2\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-27-1.png){width=480}\n:::\n:::\n\n\nI'll also impute zero for missing `snow_on_ground`, which I'm a lot more confident doing here because most of the missing values occur during non-winter months.\nA more careful approach might involve imputing 0 during non-winter months that I'm certain would have no snow on the ground, then modeling the winter months with something like a zero-inflated Poisson model.\n\n### Wind speed\n\nThe `speed_max_gust` variable is the daily maximum wind speed in km/h, and has\n41% missing values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean_speed <- mean(weather_data$speed_max_gust, na.rm = TRUE)\n\nweather_data %>%\n  mutate(\n    speed_max_gust = replace_na(speed_max_gust, 20)\n  ) %>%\n  ggplot(aes(x = count_date, y = speed_max_gust)) +\n  geom_line(data = . %>% filter(speed_max_gust > 20)) +\n  geom_smooth(data = . %>% filter(speed_max_gust > 20),\n              method = \"loess\", formula = \"y ~ x\",\n              color = td_colors$nice$spanish_blue) +\n  geom_hline(yintercept = mean_speed,\n             color = td_colors$nice$opera_mauve, size = 1, lty = 2) +\n  geom_jitter(data = . %>% filter(speed_max_gust == 20),\n              width = 0, alpha = 0.5) +\n  scale_y_continuous(breaks = c(mean_speed, 20, 40, 60, 80),\n                     labels = c(\"mean_speed\", \"missing\", 40, 60, 80))\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\nRelative to the noise, the time trends are pretty minor, and the missing data looks to be missing mostly at random.\nI'll just impute using the mean speed.\n\n### Lagged counts\n\nAs a time series data set, it would be careless to not account for past data when predicting future data, so I'll include lagged `n_bikes` values.\nInvestigate the correlation in `n_bikes` for values lagged by 1, 2 and 3 days, and by 1 and 2 weeks (because they are the same day of the week):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train_lag <- bike_train %>%\n  arrange(site_name, count_date) %>%\n  group_by(site_name) %>%\n  mutate(\n    n_bikes_lag_1 = lag(n_bikes, 1),\n    n_bikes_lag_2 = lag(n_bikes, 2),\n    n_bikes_lag_3 = lag(n_bikes, 3),\n    n_bikes_lag_7 = lag(n_bikes, 7),\n    n_bikes_lag_14 = lag(n_bikes, 14)\n  )\nbike_train_lag %>%\n  select(site_name, count_date, starts_with(\"n_bikes\")) %>%\n  pivot_longer(cols = matches(\"n_bikes_lag\"),\n               names_to = \"lag_days\", values_to = \"n_bikes_lag\") %>%\n  filter(!is.na(n_bikes_lag)) %>%\n  mutate(lag_days = str_extract(lag_days, \"\\\\d+\") %>% as.integer()) %>%\n  group_by(site_name, lag_days) %>%\n  mutate(corr_coef = cor(n_bikes, n_bikes_lag)) %>%\n  ggplot(aes(x = n_bikes_lag, y = n_bikes, color = site_name)) +\n  geom_point(alpha = 0.2) +\n  geom_label(data = . %>% distinct(n_bikes_lag, site_name, corr_coef),\n             aes(label = round(corr_coef, 2), x = 500, y = 200)) +\n  geom_abline(slope = 1) +\n  facet_grid(str_trunc(site_name, 8) ~ factor(lag_days)) +\n  dunnr::add_facet_borders() +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\nThe 7- and 14-day lagged values are correlated just as strongly (in some cases stronger) than the other options.\nThis is great news because I only want to include a single lag variable, and using the 14th day lag means I can forecast 14 days ahead.\n\nIn order to use 14-day lag in a `tidymodels` workflow, I need to add it to the data myself.\nThe `step_lag()` function won't allow the outcome `n_bikes` to be lagged, because any new data won't have an `n_bikes` variable to use.\nSee [the warning in this section of the Tidy Modeling with R book](https://www.tmwr.org/recipes.html#skip-equals-true).\nAdd the `n_bikes_lag_14` predictor, and exclude any values without it:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership <- bike_ridership %>%\n  group_by(site_name) %>%\n  mutate(n_bikes_lag_14 = lag(n_bikes, 14)) %>%\n  ungroup() %>%\n  filter(!is.na(n_bikes_lag_14))\n```\n:::\n\n\nWhile I'm at it, I'll impute the missing `mean_temperature` values with the seasonal GAM.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership <- bike_ridership %>%\n  mutate(\n    count_day = as.numeric(count_date - min(count_date)),\n    count_yday = lubridate::yday(count_date),\n  ) %>%\n  bind_cols(pred = predict(gam_temperature, newdata = .)) %>%\n  mutate(\n    mean_temperature = ifelse(is.na(mean_temperature), pred,\n                              mean_temperature)\n  ) %>%\n  select(-count_day, -count_yday, -pred)\n```\n:::\n\n\nThis means I'll have to re-split the data into training and testing (`initial_time_split()` isn't random, so doesn't require setting the seed):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership <- bike_ridership %>% arrange(count_date, site_name)\n\nbike_split <- initial_time_split(bike_ridership, prop = 0.7)\n\nbike_train <- training(bike_split)\nbike_test <- testing(bike_split)\n```\n:::\n\n\n## Modeling\n\nRegister parallel computing:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_cores <- parallel::detectCores(logical = FALSE)\nlibrary(doParallel)\ncl <- makePSOCKcluster(n_cores - 1)\nregisterDoParallel(cl)\n# This extra step makes sure the parallel workers have access to the\n#  `tidyr::replace_na()` function during pre-processing, which I use later on\n# See this issue: https://github.com/tidymodels/tune/issues/364\nparallel::clusterExport(cl, c(\"replace_na\"))\n```\n:::\n\n\n### Resampling and metrics\n\nFor re-sampling, I will use `sliding_period()` to break up the data into 14 months of data (chosen to give 10 resamples) for analysis and 1 month for assessment:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_resamples <-\n  sliding_period(bike_train, index = count_date,\n                 period = \"month\", lookback = 12, assess_stop = 2)\n```\n:::\n\n\nVisualize the resamples:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbind_rows(\n  analysis_set = map_dfr(bike_resamples$splits, analysis, .id = \"i\"),\n  assessment_set = map_dfr(bike_resamples$splits, assessment, .id = \"i\"),\n  .id = \"data_set\"\n) %>%\n  mutate(i = as.integer(i)) %>%\n  group_by(i, data_set) %>%\n  summarise(\n    min_date = min(count_date), max_date = max(count_date),\n    n_days = n(), midpoint_date = min_date + n_days / 2,\n    .groups = \"drop\"\n  ) %>%\n  ggplot(aes(y = factor(i), color = data_set)) +\n  geom_linerange(aes(xmin = min_date, xmax = max_date),\n                 position = position_dodge(0.3)) +\n  geom_point(aes(x = min_date), position = position_dodge(0.3)) +\n  geom_point(aes(x = max_date), position = position_dodge(0.3)) +\n  labs(x = \"date range\", y = NULL, color = NULL)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-35-1.png){width=576}\n:::\n:::\n\n\nI'll define a set of metrics to use here as well:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_metrics <- metric_set(rmse, rsq, mase, poisson_log_loss)\n```\n:::\n\n\nThe Poisson log loss is a new one to me, that was [recently added to `yardstick`](https://yardstick.tidymodels.org/news/index.html#yardstick-0-0-9-2021-11-22).\nI'll include it just for kicks, but I will choose my final model with `mase`, the mean absolute scaled error, which was introduced by Hyndman and Koehler [@Hyndman2006].\nThe MASE involves dividing the absolute forecast error ($|y_i - \\hat{y}_i|$) by absolute *naive* forecast error (which involves predicting with the last observed value).\nThe main advantage of this is that it is scale invariant.\nMean absolute percentage error (MAPE) is the typical scale-invariant choice in regression problems, but the MASE avoids dividing by `n_bikes` = 0 (of which there are about 20 in this data set).\nIt also has a straightforward interpretation: values greater than one indicate a worse forecast than the naive method, and values less indicate better.\n\n### Generalized linear models\n\nThe first models I will try are simple linear regression and Poisson regression, but I will test out a few different pre-processing/feature combinations.\nI would prefer to use negative binomial regression instead of Poisson to account for overdispersion (see aside), but [it hasn't been implemented in `parsnip` yet](https://github.com/tidymodels/parsnip/issues/35#issuecomment-1001088658).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_spec <- linear_reg(engine = \"lm\")\nlibrary(poissonreg) # This wrapper package is required to use `poisson_reg()`\npoisson_spec <- poisson_reg(engine = \"glm\")\n```\n:::\n\n\n::: {.column-margin}\n\nOver-dispersion in `n_bikes` (variance much higher than the mean):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_train %>%\n  group_by(site_name) %>%\n  summarise(mean_n_bikes = mean(n_bikes), var_n_bikes = var(n_bikes))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n  site_name                       mean_n_bikes var_n_bikes\n  <chr>                                  <dbl>       <dbl>\n1 Dartmouth Harbourfront Greenway        145.        3121.\n2 Hollis St                               77.0       2180.\n3 South Park St                          174.       26594.\n4 Vernon St                              212.       18080.\n5 Windsor St                              96.3       3413.\n```\n:::\n:::\n\n\n:::\n\nFor my base pre-processing, I'll include just `site_name` and `n_bikes_lag_14`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_recipe <-\n  recipe(n_bikes ~ count_date + site_name + n_bikes_lag_14,\n         data = bike_train) %>%\n  add_role(count_date, new_role = \"date_variable\") %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_dummy(all_nominal_predictors()) %>%\n  step_zv(all_predictors())\n```\n:::\n\n\nThe first extension of this recipe will include date variables.\nI'll add day of week as categorical, day of year as numerical (and tune a natural spline function), year as numerical and Canadian holidays as categorical.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_recipe_date <-\n  recipe(n_bikes ~ count_date + site_name + n_bikes_lag_14,\n         data = bike_train) %>%\n  add_role(count_date, new_role = \"date_variable\") %>%\n  step_date(count_date, features = c(\"dow\", \"doy\", \"year\"),\n            label = TRUE, ordinal = FALSE) %>%\n  step_ns(count_date_doy, deg_free = tune()) %>%\n  step_holiday(count_date, holidays = canada_holidays) %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_dummy(all_nominal_predictors()) %>%\n  step_zv(all_predictors())\n```\n:::\n\n\nI'll consider the weather variables, with the imputations discussed in the [feature engineering section](#feature-engineering), separately:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_recipe_weather <-\n  recipe(n_bikes ~ count_date + site_name + n_bikes_lag_14 + mean_temperature +\n           total_precipitation + speed_max_gust + snow_on_ground,\n         data = bike_train) %>%\n  add_role(count_date, new_role = \"date_variable\") %>%\n  step_impute_mean(speed_max_gust) %>%\n  # Impute these missing values with zero\n  step_mutate_at(c(total_precipitation, snow_on_ground),\n                 fn = ~ replace_na(., 0)) %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_dummy(all_nominal_predictors()) %>%\n  step_zv(all_predictors())\n```\n:::\n\n\nAnd lastly, all the features together:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_recipe_date_weather <-\n  recipe(n_bikes ~ count_date + site_name + n_bikes_lag_14 + mean_temperature +\n           total_precipitation + speed_max_gust + snow_on_ground,\n         data = bike_train) %>%\n  add_role(count_date, new_role = \"date_variable\") %>%\n  step_date(count_date, features = c(\"dow\", \"doy\", \"year\"),\n            label = TRUE, ordinal = FALSE) %>%\n  step_ns(count_date_doy, deg_free = tune()) %>%\n  step_holiday(count_date, holidays = canada_holidays) %>%\n  step_impute_mean(speed_max_gust) %>%\n  step_mutate_at(c(total_precipitation, snow_on_ground),\n                 fn = ~ replace_na(., 0)) %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_dummy(all_nominal_predictors()) %>%\n  step_zv(all_predictors())\n```\n:::\n\n\n\n\nPut these pre-processing recipes and the model specifications into a `workflow_set()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_wf_set <- workflow_set(\n  preproc = list(base = glm_recipe,\n                 date = glm_recipe_date, weather = glm_recipe_weather,\n                 date_weather = glm_recipe_date_weather),\n  models = list(linear_reg = lm_spec, poisson_reg = poisson_spec),\n  cross = TRUE\n)\n```\n:::\n\n\nNow fit the resamples using each combination of model specification and pre-processing recipe:\n\n\n::: {.cell hash='predicting-bike-ridership-developing-a-model_cache/html/glm-wf-set-res_88127b05521146603be8716112aff6a6'}\n\n```{.r .cell-code}\ntic()\nglm_wf_set_res <- workflow_map(\n  glm_wf_set,\n  \"tune_grid\",\n  # I'll try just a few `deg_free` in the spline term\n  grid = grid_regular(deg_free(range = c(4, 7)), levels = 4),\n  resamples = bike_resamples, metrics = bike_metrics\n)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n39.89 sec elapsed\n```\n:::\n:::\n\n\nFor plotting the results this set of workflows, I'll use a custom plotting function with `rank_results()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_wf_set_metrics <- function(wf_set_res, rank_metric = \"mase\") {\n  rank_results(wf_set_res, rank_metric = rank_metric) %>%\n    mutate(preproc = str_remove(wflow_id, paste0(\"_\", model))) %>%\n    ggplot(aes(x = rank, y = mean, color = model, shape = preproc)) +\n    geom_point(size = 2) +\n    geom_errorbar(aes(ymin = mean - std_err, ymax = mean + std_err),\n                  width = 0.2) +\n    facet_wrap(~ .metric, scales = \"free_y\")\n  \n}\nplot_wf_set_metrics(glm_wf_set_res)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-46-1.png){width=672}\n:::\n:::\n\n\n::: {.column-margin}\n\nI'm using my own function because the `workflowsets::autoplot()` function doesn't distinguish preprocessor recipes using the names provided to the `preproc` argument -- everything just gets the name \"recipe\":\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrank_results(glm_wf_set_res) %>%\n  distinct(wflow_id, model, preprocessor)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 × 3\n  wflow_id                 preprocessor model      \n  <chr>                    <chr>        <chr>      \n1 date_weather_poisson_reg recipe       poisson_reg\n2 date_weather_linear_reg  recipe       linear_reg \n3 weather_linear_reg       recipe       linear_reg \n4 date_linear_reg          recipe       linear_reg \n5 base_linear_reg          recipe       linear_reg \n6 date_poisson_reg         recipe       poisson_reg\n7 weather_poisson_reg      recipe       poisson_reg\n8 base_poisson_reg         recipe       poisson_reg\n```\n:::\n:::\n\n\nMy function extracts the recipe name from `wflow_id`.\n\n:::\n\nAcross the board, the model will all the features (date and weather predictors; indicated by the square symbols) are best, and Poisson regression slightly outperforms linear.\nHere are the models ranked by MASE:^[Using the `select_best = TRUE` argument means only the best model in each workflow is returned. In this case, that means the workflows with the tunable spline feature of `count_date_doy` will only have one entry.]\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrank_results(glm_wf_set_res, select_best = TRUE, rank_metric = \"mase\") %>%\n  filter(.metric == \"mase\") %>%\n  select(rank, wflow_id, .config, mase = mean, std_err) %>%\n  gt() %>%\n  fmt_number(columns = c(mase, std_err), decimals = 3)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"wqwhemdsrs\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wqwhemdsrs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wqwhemdsrs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wqwhemdsrs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wqwhemdsrs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wqwhemdsrs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wqwhemdsrs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wqwhemdsrs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wqwhemdsrs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wqwhemdsrs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wqwhemdsrs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wqwhemdsrs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wqwhemdsrs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wqwhemdsrs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wqwhemdsrs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wqwhemdsrs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wqwhemdsrs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wqwhemdsrs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wqwhemdsrs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wqwhemdsrs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wqwhemdsrs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wqwhemdsrs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wqwhemdsrs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wqwhemdsrs .gt_left {\n  text-align: left;\n}\n\n#wqwhemdsrs .gt_center {\n  text-align: center;\n}\n\n#wqwhemdsrs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wqwhemdsrs .gt_font_normal {\n  font-weight: normal;\n}\n\n#wqwhemdsrs .gt_font_bold {\n  font-weight: bold;\n}\n\n#wqwhemdsrs .gt_font_italic {\n  font-style: italic;\n}\n\n#wqwhemdsrs .gt_super {\n  font-size: 65%;\n}\n\n#wqwhemdsrs .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#wqwhemdsrs .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#wqwhemdsrs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wqwhemdsrs .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#wqwhemdsrs .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#wqwhemdsrs .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">rank</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">wflow_id</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">.config</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">mase</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">std_err</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_right\">1</td>\n<td class=\"gt_row gt_left\">date_weather_poisson_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor3_Model1</td>\n<td class=\"gt_row gt_right\">0.547</td>\n<td class=\"gt_row gt_right\">0.056</td></tr>\n    <tr><td class=\"gt_row gt_right\">2</td>\n<td class=\"gt_row gt_left\">date_weather_linear_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor3_Model1</td>\n<td class=\"gt_row gt_right\">0.577</td>\n<td class=\"gt_row gt_right\">0.075</td></tr>\n    <tr><td class=\"gt_row gt_right\">3</td>\n<td class=\"gt_row gt_left\">date_linear_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor2_Model1</td>\n<td class=\"gt_row gt_right\">0.604</td>\n<td class=\"gt_row gt_right\">0.052</td></tr>\n    <tr><td class=\"gt_row gt_right\">4</td>\n<td class=\"gt_row gt_left\">weather_linear_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td>\n<td class=\"gt_row gt_right\">0.622</td>\n<td class=\"gt_row gt_right\">0.067</td></tr>\n    <tr><td class=\"gt_row gt_right\">5</td>\n<td class=\"gt_row gt_left\">date_poisson_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor2_Model1</td>\n<td class=\"gt_row gt_right\">0.626</td>\n<td class=\"gt_row gt_right\">0.064</td></tr>\n    <tr><td class=\"gt_row gt_right\">6</td>\n<td class=\"gt_row gt_left\">base_linear_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td>\n<td class=\"gt_row gt_right\">0.635</td>\n<td class=\"gt_row gt_right\">0.055</td></tr>\n    <tr><td class=\"gt_row gt_right\">7</td>\n<td class=\"gt_row gt_left\">weather_poisson_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td>\n<td class=\"gt_row gt_right\">0.670</td>\n<td class=\"gt_row gt_right\">0.080</td></tr>\n    <tr><td class=\"gt_row gt_right\">8</td>\n<td class=\"gt_row gt_left\">base_poisson_reg</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td>\n<td class=\"gt_row gt_right\">0.760</td>\n<td class=\"gt_row gt_right\">0.055</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nSo our best workflow has the id `date_weather_poisson_reg`^[You could make the argument that the improvement is so minor that it is worth choosing the simpler linear regression model instead.] with the `.config` \"Preprocessor3_Model1\" which refers to a specific spline degree from our tuning of the `count_date_doy` feature.\nI can check out the results of the tuning with `autoplot()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(glm_wf_set_res, id = \"date_weather_poisson_reg\") +\n  facet_wrap(~ .metric, nrow = 2, scales = \"free_y\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-49-1.png){width=576}\n:::\n:::\n\n\nThe polynomial of degree 6 did best by MASE, which I'll use to finalize the workflow and fit to the full training set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglm_poisson_workflow <- finalize_workflow(\n  extract_workflow(glm_wf_set_res, \"date_weather_poisson_reg\"),\n  extract_workflow_set_result(glm_wf_set_res, \"date_weather_poisson_reg\") %>%\n    select_best(metric = \"mase\")\n)\nglm_poisson_fit <- glm_poisson_workflow %>% fit(bike_train)\n```\n:::\n\n\n#### Model interpretation\n\nAn advantage of using a generalized linear model is that they are easy to interpret.\nA simple way to estimate variable important in a GLM is to look at the absolute value of the $t$-statistic (`statistic` in the below table) -- here are the top 5:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoisson_coefs <- tidy(glm_poisson_fit) %>%\n  arrange(desc(abs(statistic))) %>%\n  mutate(estimate = signif(estimate, 3), std.error = signif(estimate, 2),\n         statistic = round(statistic, 1), p.value = scales::pvalue(p.value))\nhead(poisson_coefs, 5) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ineyyltcbu\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ineyyltcbu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ineyyltcbu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ineyyltcbu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ineyyltcbu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ineyyltcbu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ineyyltcbu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ineyyltcbu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ineyyltcbu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ineyyltcbu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ineyyltcbu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ineyyltcbu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ineyyltcbu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ineyyltcbu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ineyyltcbu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ineyyltcbu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ineyyltcbu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ineyyltcbu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ineyyltcbu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ineyyltcbu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ineyyltcbu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ineyyltcbu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ineyyltcbu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ineyyltcbu .gt_left {\n  text-align: left;\n}\n\n#ineyyltcbu .gt_center {\n  text-align: center;\n}\n\n#ineyyltcbu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ineyyltcbu .gt_font_normal {\n  font-weight: normal;\n}\n\n#ineyyltcbu .gt_font_bold {\n  font-weight: bold;\n}\n\n#ineyyltcbu .gt_font_italic {\n  font-style: italic;\n}\n\n#ineyyltcbu .gt_super {\n  font-size: 65%;\n}\n\n#ineyyltcbu .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#ineyyltcbu .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#ineyyltcbu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ineyyltcbu .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#ineyyltcbu .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#ineyyltcbu .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">total_precipitation</td>\n<td class=\"gt_row gt_right\">-0.0384</td>\n<td class=\"gt_row gt_right\">-0.038</td>\n<td class=\"gt_row gt_right\">-84.6</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">site_name_South.Park.St</td>\n<td class=\"gt_row gt_right\">0.6890</td>\n<td class=\"gt_row gt_right\">0.690</td>\n<td class=\"gt_row gt_right\">68.6</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">site_name_Vernon.St</td>\n<td class=\"gt_row gt_right\">0.5490</td>\n<td class=\"gt_row gt_right\">0.550</td>\n<td class=\"gt_row gt_right\">57.8</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">mean_temperature</td>\n<td class=\"gt_row gt_right\">0.0365</td>\n<td class=\"gt_row gt_right\">0.036</td>\n<td class=\"gt_row gt_right\">53.3</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">n_bikes_lag_14</td>\n<td class=\"gt_row gt_right\">0.0010</td>\n<td class=\"gt_row gt_right\">0.001</td>\n<td class=\"gt_row gt_right\">48.2</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nA couple of the weather variables are among the most influential in predicting `n_bikes`.\nHere are all the weather coefficients:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npoisson_coefs %>%\n  filter(str_detect(term, \"temperature|precip|max_gust|snow\")) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"rhbwsowsxc\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#rhbwsowsxc .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#rhbwsowsxc .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#rhbwsowsxc .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#rhbwsowsxc .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#rhbwsowsxc .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#rhbwsowsxc .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#rhbwsowsxc .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#rhbwsowsxc .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rhbwsowsxc .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#rhbwsowsxc .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#rhbwsowsxc .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#rhbwsowsxc .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#rhbwsowsxc .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rhbwsowsxc .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#rhbwsowsxc .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#rhbwsowsxc .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rhbwsowsxc .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#rhbwsowsxc .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rhbwsowsxc .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#rhbwsowsxc .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rhbwsowsxc .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#rhbwsowsxc .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#rhbwsowsxc .gt_left {\n  text-align: left;\n}\n\n#rhbwsowsxc .gt_center {\n  text-align: center;\n}\n\n#rhbwsowsxc .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#rhbwsowsxc .gt_font_normal {\n  font-weight: normal;\n}\n\n#rhbwsowsxc .gt_font_bold {\n  font-weight: bold;\n}\n\n#rhbwsowsxc .gt_font_italic {\n  font-style: italic;\n}\n\n#rhbwsowsxc .gt_super {\n  font-size: 65%;\n}\n\n#rhbwsowsxc .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#rhbwsowsxc .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#rhbwsowsxc .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#rhbwsowsxc .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#rhbwsowsxc .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#rhbwsowsxc .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">total_precipitation</td>\n<td class=\"gt_row gt_right\">-0.03840</td>\n<td class=\"gt_row gt_right\">-0.0380</td>\n<td class=\"gt_row gt_right\">-84.6</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">mean_temperature</td>\n<td class=\"gt_row gt_right\">0.03650</td>\n<td class=\"gt_row gt_right\">0.0360</td>\n<td class=\"gt_row gt_right\">53.3</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">snow_on_ground</td>\n<td class=\"gt_row gt_right\">-0.05360</td>\n<td class=\"gt_row gt_right\">-0.0540</td>\n<td class=\"gt_row gt_right\">-28.9</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n    <tr><td class=\"gt_row gt_left\">speed_max_gust</td>\n<td class=\"gt_row gt_right\">-0.00735</td>\n<td class=\"gt_row gt_right\">-0.0074</td>\n<td class=\"gt_row gt_right\">-19.6</td>\n<td class=\"gt_row gt_left\">&lt;0.001</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nSince this is a Poisson model, the link function (non-linear relationship between the outcome and the predictors) is the logarithm:\n\n\n$$\n\\begin{align}\n\\log{n}_{\\text{bikes}} &= \\beta_0 + \\beta_1 x_1 + \\dots + \\beta_p x_p \\\\\nn_{\\text{bikes}} &= \\text{exp}(\\beta_0 + \\beta_1 x_1 + \\dots + \\beta_p x_p) \\\\\n&= \\text{exp}(\\beta_0) \\text{exp}(\\beta_1 x_1) \\dots \\text{exp}(\\beta_p x_p) \\\\\n\\end{align}\n$$\n\n\nSo the coefficients are interpreted as: for every one unit increase in $x_i$, the expected value of $n_{\\text{bikes}}$ changes by multiplicative factor of $\\text{exp}(\\beta_i)$, holding all other predictors constant.\nHere are some plain-language interpretations of the weather coefficients:\n\n\n\n\n\n* For every 5°C increase in daily average temperature (`mean_temperature`), the expected value of `n_bikes` increases by 120%.\n* For every 10mm increase in daily rain (`total_precipitation`), the expected value of `n_bikes` decreases by 68%.\n* For every 10km/h increase in maximum wind speed (`speed_max_gust`), the expected value of `n_bikes` decreases by 93%.\n* For every 5cm of snow (`snow_on_ground`), the expected value of `n_bikes` decreases by 77%.\n\nA more thorough and formal analysis of these types of relationships should involve exploration of marginal effects (with a package like `marginaleffects` for example), but I'll move on to other models.\n\n\n\n\n\n### Tree-based methods\n\nFor tree-based methods, I'll use similar pre-processing as with GLM, except I won't use a spline term (trees partition the feature space to capture non-linearity):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntrees_recipe <-\n  recipe(n_bikes ~ count_date + site_name + n_bikes_lag_14 + mean_temperature +\n           total_precipitation + speed_max_gust + snow_on_ground,\n         data = bike_train) %>%\n  update_role(count_date, new_role = \"date_variable\") %>%\n  step_date(count_date, features = c(\"dow\", \"doy\", \"year\"),\n            label = TRUE, ordinal = FALSE) %>%\n  step_holiday(count_date, holidays = canada_holidays) %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_impute_mean(speed_max_gust) %>%\n  step_mutate_at(c(total_precipitation, snow_on_ground),\n                 fn = ~ replace_na(., 0)) %>%\n  step_zv(all_predictors())\n\n# XGBoost requires dummy variables\ntrees_recipe_dummy <- trees_recipe %>%\n  step_dummy(all_nominal_predictors())\n```\n:::\n\n\nI'll try a decision tree, a random forest, and an XGBoost model, each with hyperparameters indicated for tuning:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndecision_spec <-\n  decision_tree(cost_complexity = tune(), tree_depth = tune(),\n                min_n = tune()) %>%\n  set_engine(\"rpart\") %>%\n  set_mode(\"regression\")\n\nrf_spec <- rand_forest(mtry = tune(), min_n = tune(), trees = 1000) %>%\n  # Setting the `importance` parameter now lets me use `vip` later\n  set_engine(\"ranger\", importance = \"permutation\") %>%\n  set_mode(\"regression\")\n\nxgb_spec <- boost_tree(\n  mtry = tune(), trees = tune(), min_n = tune(),\n  tree_depth = tune(), learn_rate = tune()\n) %>%\n  set_engine(\"xgboost\") %>%\n  set_mode(\"regression\")\n\ntrees_wf_set <- workflow_set(\n  preproc = list(trees_recipe = trees_recipe,\n                 trees_recipe = trees_recipe,\n                 trees_recipe_dummy = trees_recipe_dummy),\n  models = list(rf = rf_spec, decision = decision_spec, xgb = xgb_spec),\n  cross = FALSE\n)\n```\n:::\n\n\nAs a first pass, I'll let `tune_grid()` choose 10 parameter combinations automatically for each model (`grid = 10`):\n\n\n::: {.cell hash='predicting-bike-ridership-developing-a-model_cache/html/trees-wf-set-res_e68d09cf5f793a76a27f5f7e26f56c58'}\n\n```{.r .cell-code}\nset.seed(225)\ntic()\ntrees_wf_set_res <- workflow_map(\n  trees_wf_set,\n  \"tune_grid\",\n  grid = 10, resamples = bike_resamples, metrics = bike_metrics,\n)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n100.33 sec elapsed\n```\n:::\n:::\n\n\nVisualize the performance of the 30 workflows, ranked by MASE:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Don't need to use my custom function defined previously because I'm\n#  not using functionally different recipes for each model\nautoplot(trees_wf_set_res, rank_metric = \"mase\")\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-58-1.png){width=672}\n:::\n:::\n\n\nAs I would have expected, the decision tree models generally perform worse than random forest models (which consist of multiple decision trees).\nThe boosted tree models (which also consist of multiple decision trees, but differ in how they are built and combined) slightly outperform random forests, which is also expected. \n\nFor the three different tree-based model types, I'll extract the best-performing workflows (by MASE) and fit to the full training set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndecision_workflow <- finalize_workflow(\n  extract_workflow(trees_wf_set_res, \"trees_recipe_decision\"),\n  extract_workflow_set_result(trees_wf_set_res, \"trees_recipe_decision\") %>%\n    select_best(metric = \"mase\")\n)\nrf_workflow <- finalize_workflow(\n  extract_workflow(trees_wf_set_res, \"trees_recipe_rf\"),\n  extract_workflow_set_result(trees_wf_set_res, \"trees_recipe_rf\") %>%\n    select_best(metric = \"mase\")\n)\nxgb_workflow <- finalize_workflow(\n  extract_workflow(trees_wf_set_res, \"trees_recipe_dummy_xgb\"),\n  extract_workflow_set_result(trees_wf_set_res, \"trees_recipe_dummy_xgb\") %>%\n    select_best(metric = \"mase\")\n)\n\ndecision_fit <- decision_workflow %>% fit(bike_train)\nrf_fit <- rf_workflow %>% fit(bike_train)\nxgb_fit <- xgb_workflow %>% fit(bike_train)\n```\n:::\n\n\n#### Model interpretation\n\n\n\n\n\nDecision trees are the easiest of the three to interpret, but this decision tree is quite complicated.\nIt has 44 leaf nodes (i.e. terminal nodes) with a depth of 6.\nThe visualization (done with the `rpart.plot` package) is messy and hidden below:\n\n<details><summary>Decision tree plot</summary>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nextract_fit_engine(decision_fit) %>%\n  rpart.plot::rpart.plot(\n    # Using some options to try and make the tree more readable\n    fallen.leaves = FALSE, roundint = FALSE,\n    tweak = 5, type = 0, faclen = 10, clip.facs = TRUE, compress = FALSE\n  )\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-61-1.png){width=768}\n:::\n:::\n\n\n</details>\n\nThe nodes at the top of the tree are a good indicator of feature importance.\nHere, that was `n_bikes_lag_14`, followed by `mean_temperature` and `total_precipitation`.\n\nTo quantify the contribution of each feature in a tree-based model, we can calculate variable importance with the `vip` package.\nPlot the top 5 variables for all 3 models:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(vip)\n\np1 <- extract_fit_engine(decision_fit) %>%\n  vip(num_features = 5) +\n  scale_y_continuous(NULL, expand = c(0, 0)) +\n  labs(subtitle = \"Decision tree\")\np2 <- extract_fit_engine(rf_fit) %>%\n  vip(num_features = 5) +\n  scale_y_continuous(NULL, expand = c(0, 0)) +\n  labs(subtitle = \"Random forest\")\np3 <- extract_fit_engine(xgb_fit) %>%\n  vip(num_features = 5) +\n  scale_y_continuous(NULL, expand = c(0, 0)) +\n  labs(subtitle = \"XGBoost\")\np1 + p2 + p3 +\n  plot_layout(ncol = 1)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-62-1.png){width=672}\n:::\n:::\n\n\nWe see that `n_bikes_lag_14`, `mean_temperature`, and `site_name` are important with all three models.\nMeasures of time within (`count_date_doy`) and across (`count_date_year`) years are also important.\n\n#### XGBoost tuning\n\nSo far, I've only considered 10 candidate sets of hyperparameters for tuning each tree-based model.\nLet's try 100 with XGBoost:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get the number of predictors so I can set max number of predictors in `mtry()`\nbike_train_baked <- prep(trees_recipe_dummy) %>% bake(bike_train)\n\n# `grid_latin_hypercube()` is a space-filling parameter grid design that will\n#  efficiently cover the parameter space for me\nxgb_grid <- grid_latin_hypercube(\n  finalize(mtry(), select(bike_train_baked, -n_bikes)),\n  trees(), min_n(), tree_depth(), learn_rate(),\n  size = 100\n)\nxgb_grid\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 100 × 5\n    mtry trees min_n tree_depth learn_rate\n   <int> <int> <int>      <int>      <dbl>\n 1    14   300    20          8   4.27e- 4\n 2    30  1560     5         12   2.17e- 5\n 3    22  1723    30          2   1.37e- 2\n 4     2   268    21          2   6.42e-10\n 5     7   780    15         12   1.09e- 5\n 6    24   642    24          2   7.51e- 5\n 7     3  1066    36          3   8.06e- 9\n 8    13   725     4          6   1.94e- 2\n 9    18   574    40          9   5.55e- 7\n10    27  1988    38         13   7.08e- 9\n# … with 90 more rows\n# ℹ Use `print(n = ...)` to see more rows\n```\n:::\n:::\n\n\nWe have just one model and one preprocessor now, so put it into a single `workflow`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nxgb_workflow_2 <- workflow() %>%\n  add_recipe(trees_recipe_dummy) %>%\n  add_model(xgb_spec)\n```\n:::\n\n\nAnd tune:\n\n\n::: {.cell hash='predicting-bike-ridership-developing-a-model_cache/html/bike-xgb-tune_a055f81574613ea77b3f16a3dfec2f93'}\n\n```{.r .cell-code}\nset.seed(2081)\ntic()\nxgb_tune <- tune_grid(\n  xgb_workflow_2, resamples = bike_resamples,\n  grid = xgb_grid, metrics = bike_metrics\n)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n580.23 sec elapsed\n```\n:::\n:::\n\n\nHere are the metrics for the different candidate models:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(xgb_tune)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-66-1.png){width=672}\n:::\n:::\n\n\nFinalize the workflow with the best hyperparameters and fit the full training set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nxgb_workflow_2 <- finalize_workflow(\n  xgb_workflow_2, select_best(xgb_tune, metric = \"mase\")\n)\n\nxgb_fit_2 <- xgb_workflow_2 %>% fit(bike_train)\n```\n:::\n\n\n### Support vector machines\n\nLastly, I will try some support vector machine regressions with linear, polynomial and radial basis function (RBF) kernels:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# New recipe for the SVMs which require a `step_normalize()`\nsvm_recipe <-\n  recipe(\n    n_bikes ~ count_date + site_name + n_bikes_lag_14 + mean_temperature + \n      total_precipitation + speed_max_gust + snow_on_ground,\n    data = bike_train, \n  ) %>% \n  update_role(count_date, new_role = \"date_variable\") %>%\n  step_date(count_date, features = c(\"dow\", \"doy\", \"year\"),\n            label = TRUE, ordinal = FALSE) %>%\n  step_holiday(count_date, holidays = canada_holidays) %>%\n  step_novel(all_nominal_predictors()) %>%\n  step_impute_mean(speed_max_gust) %>%\n  step_mutate_at(c(total_precipitation, snow_on_ground),\n                 fn = ~ replace_na(., 0)) %>%\n  step_zv(all_predictors()) %>% \n  step_normalize(all_numeric_predictors())\n\nsvm_linear_spec <- svm_linear(cost = tune(), margin = tune()) %>%\n  set_mode(\"regression\") %>%\n  set_engine(\"kernlab\")\n\nsvm_poly_spec <- svm_poly(cost = tune(), margin = tune(),\n                          scale_factor = tune(), degree = tune()) %>%\n  set_mode(\"regression\") %>%\n  set_engine(\"kernlab\")\n\nsvm_rbf_spec <-  svm_rbf(cost = tune(), rbf_sigma = tune()) %>% \n  set_mode(\"regression\") %>%\n  set_engine(\"kernlab\")\n\nsvm_wf_set <- workflow_set(\n  preproc = list(svm_recipe),\n  models = list(linear = svm_linear_spec, poly = svm_poly_spec,\n                rbf = svm_rbf_spec)\n)\n```\n:::\n\n::: {.cell hash='predicting-bike-ridership-developing-a-model_cache/html/svm-wf-set-res_8951ee59d029a8ba033dbb7b734a6beb'}\n\n```{.r .cell-code}\nset.seed(4217)\nsvm_wf_set_res <- workflow_map(\n  svm_wf_set,\n  \"tune_grid\",\n  grid = 10, resamples = bike_resamples, metrics = bike_metrics\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nautoplot(svm_wf_set_res)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-70-1.png){width=672}\n:::\n:::\n\n\nThose are some pretty interesting (and smooth) trends.\nThe best model is one of the `svm_rbf` candidates (though the next 10 are the `svm_linear` models).\nFinalize the workflows and fit:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsvm_linear_wf_res <-\n  extract_workflow_set_result(svm_wf_set_res, \"recipe_linear\")\nsvm_linear_wf <-\n  finalize_workflow(\n    extract_workflow(svm_wf_set, \"recipe_linear\"),\n    select_best(svm_linear_wf_res, \"mase\")\n  )\nsvm_linear_fit <- fit(svm_linear_wf, bike_train)\n\nsvm_poly_wf_res <-\n  extract_workflow_set_result(svm_wf_set_res, \"recipe_poly\")\nsvm_poly_wf <-\n  finalize_workflow(\n    extract_workflow(svm_wf_set, \"recipe_poly\"),\n    select_best(svm_poly_wf_res, \"mase\")\n  )\nsvm_poly_fit <- fit(svm_poly_wf, bike_train)\n\nsvm_rbf_wf_res <-\n  extract_workflow_set_result(svm_wf_set_res, \"recipe_rbf\")\nsvm_rbf_wf <-\n  finalize_workflow(\n    extract_workflow(svm_wf_set, \"recipe_rbf\"),\n    select_best(svm_rbf_wf_res, \"mase\")\n  )\nsvm_rbf_fit <- fit(svm_rbf_wf, bike_train)\n```\n:::\n\n\n## Choosing a final model\n\n\n\n\n\nI'll choose a model by the best cross-validated MASE:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbind_rows(\n  rank_results(glm_wf_set_res, rank_metric = \"mase\",\n                     select_best = TRUE) %>%\n    # Only include the full pre-processing recipe\n    filter(str_detect(wflow_id, \"date_weather\")),\n  rank_results(trees_wf_set_res, rank_metric = \"mase\", select_best = TRUE),\n  rank_results(svm_wf_set_res, rank_metric = \"mase\", select_best = TRUE),\n  show_best(xgb_tune, metric = \"mase\", n = 1) %>%\n    mutate(model = \"boost_tree_2\")\n) %>%\n  filter(.metric == \"mase\") %>%\n  select(model, mase = mean, std_err) %>%\n  arrange(mase) %>%\n  gt() %>%\n  fmt_number(c(mase, std_err), decimals = 4)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"wbxhmqklhu\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wbxhmqklhu .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wbxhmqklhu .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wbxhmqklhu .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wbxhmqklhu .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wbxhmqklhu .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wbxhmqklhu .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wbxhmqklhu .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wbxhmqklhu .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wbxhmqklhu .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wbxhmqklhu .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wbxhmqklhu .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wbxhmqklhu .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wbxhmqklhu .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbxhmqklhu .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wbxhmqklhu .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wbxhmqklhu .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbxhmqklhu .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wbxhmqklhu .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbxhmqklhu .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wbxhmqklhu .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbxhmqklhu .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wbxhmqklhu .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wbxhmqklhu .gt_left {\n  text-align: left;\n}\n\n#wbxhmqklhu .gt_center {\n  text-align: center;\n}\n\n#wbxhmqklhu .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wbxhmqklhu .gt_font_normal {\n  font-weight: normal;\n}\n\n#wbxhmqklhu .gt_font_bold {\n  font-weight: bold;\n}\n\n#wbxhmqklhu .gt_font_italic {\n  font-style: italic;\n}\n\n#wbxhmqklhu .gt_super {\n  font-size: 65%;\n}\n\n#wbxhmqklhu .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#wbxhmqklhu .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#wbxhmqklhu .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wbxhmqklhu .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#wbxhmqklhu .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#wbxhmqklhu .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">mase</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">std_err</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">boost_tree_2</td>\n<td class=\"gt_row gt_right\">0.4913</td>\n<td class=\"gt_row gt_right\">0.0503</td></tr>\n    <tr><td class=\"gt_row gt_left\">boost_tree</td>\n<td class=\"gt_row gt_right\">0.4933</td>\n<td class=\"gt_row gt_right\">0.0545</td></tr>\n    <tr><td class=\"gt_row gt_left\">rand_forest</td>\n<td class=\"gt_row gt_right\">0.5099</td>\n<td class=\"gt_row gt_right\">0.0566</td></tr>\n    <tr><td class=\"gt_row gt_left\">svm_rbf</td>\n<td class=\"gt_row gt_right\">0.5420</td>\n<td class=\"gt_row gt_right\">0.0440</td></tr>\n    <tr><td class=\"gt_row gt_left\">poisson_reg</td>\n<td class=\"gt_row gt_right\">0.5471</td>\n<td class=\"gt_row gt_right\">0.0563</td></tr>\n    <tr><td class=\"gt_row gt_left\">decision_tree</td>\n<td class=\"gt_row gt_right\">0.5481</td>\n<td class=\"gt_row gt_right\">0.0500</td></tr>\n    <tr><td class=\"gt_row gt_left\">svm_linear</td>\n<td class=\"gt_row gt_right\">0.5608</td>\n<td class=\"gt_row gt_right\">0.0478</td></tr>\n    <tr><td class=\"gt_row gt_left\">linear_reg</td>\n<td class=\"gt_row gt_right\">0.5775</td>\n<td class=\"gt_row gt_right\">0.0754</td></tr>\n    <tr><td class=\"gt_row gt_left\">svm_poly</td>\n<td class=\"gt_row gt_right\">0.6253</td>\n<td class=\"gt_row gt_right\">0.0410</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nXGBoost takes the top two spots, with `boost_tree_2` (the more thorough tuning) being the slight winner.\nPerform a `last_fit()` and get the performance on the held-out test set:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nxgb_final_fit <- last_fit(\n  xgb_workflow_2, split = bike_split, metrics = bike_metrics\n)\ncollect_metrics(xgb_final_fit) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"mdfisbbvvs\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#mdfisbbvvs .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#mdfisbbvvs .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#mdfisbbvvs .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#mdfisbbvvs .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#mdfisbbvvs .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#mdfisbbvvs .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#mdfisbbvvs .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#mdfisbbvvs .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mdfisbbvvs .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mdfisbbvvs .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#mdfisbbvvs .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#mdfisbbvvs .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#mdfisbbvvs .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mdfisbbvvs .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#mdfisbbvvs .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#mdfisbbvvs .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mdfisbbvvs .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#mdfisbbvvs .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mdfisbbvvs .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#mdfisbbvvs .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mdfisbbvvs .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mdfisbbvvs .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mdfisbbvvs .gt_left {\n  text-align: left;\n}\n\n#mdfisbbvvs .gt_center {\n  text-align: center;\n}\n\n#mdfisbbvvs .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#mdfisbbvvs .gt_font_normal {\n  font-weight: normal;\n}\n\n#mdfisbbvvs .gt_font_bold {\n  font-weight: bold;\n}\n\n#mdfisbbvvs .gt_font_italic {\n  font-style: italic;\n}\n\n#mdfisbbvvs .gt_super {\n  font-size: 65%;\n}\n\n#mdfisbbvvs .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#mdfisbbvvs .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#mdfisbbvvs .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#mdfisbbvvs .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#mdfisbbvvs .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#mdfisbbvvs .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">.metric</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">.estimator</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">.estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">.config</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">rmse</td>\n<td class=\"gt_row gt_left\">standard</td>\n<td class=\"gt_row gt_right\">42.8027205</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td></tr>\n    <tr><td class=\"gt_row gt_left\">rsq</td>\n<td class=\"gt_row gt_left\">standard</td>\n<td class=\"gt_row gt_right\">0.5487906</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td></tr>\n    <tr><td class=\"gt_row gt_left\">mase</td>\n<td class=\"gt_row gt_left\">standard</td>\n<td class=\"gt_row gt_right\">0.7146084</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td></tr>\n    <tr><td class=\"gt_row gt_left\">poisson_log_loss</td>\n<td class=\"gt_row gt_left\">standard</td>\n<td class=\"gt_row gt_right\">NaN</td>\n<td class=\"gt_row gt_left\">Preprocessor1_Model1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nThere's a bit of a drop-off in performance from the training metrics.\nLet's dig into the predictions.\n\n### Exploring the predictions\n\nPlot the relationship between actual `n_bikes` and predicted:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nxgb_final_preds <- bind_rows(\n  train = augment(extract_workflow(xgb_final_fit), bike_train),\n  test = augment(extract_workflow(xgb_final_fit), bike_test),\n  .id = \"data_set\"\n) %>%\n  mutate(data_set = fct_inorder(data_set))\n\nxgb_final_preds %>%\n  ggplot(aes(x = n_bikes, y = .pred)) +\n  geom_point() +\n  geom_abline(slope = 1, size = 1, color = td_colors$nice$emerald) +\n  facet_wrap(~ data_set)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-75-1.png){width=576}\n:::\n:::\n\n\nAnd here are the predictions overlaid on the data (vertical line delineates training and testing sets):\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- xgb_final_preds %>%\n  ggplot(aes(x = count_date)) +\n  geom_line(aes(y = n_bikes, color = site_name), size = 1) +\n  geom_line(aes(y = .pred), color = \"black\") +\n  geom_vline(xintercept = min(bike_test$count_date), lty = 2) +\n  facet_wrap(~ site_name, ncol = 1, scales = \"free_y\") +\n  theme(legend.position = \"none\") +\n  scale_y_continuous(breaks = seq(0, 600, 200)) +\n  expand_limits(y = 200) +\n  dunnr::add_facet_borders()\np\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-76-1.png){width=672}\n:::\n:::\n\n\nTruncate the dates to look closer at the testing set performance:\n\n\n::: {.cell}\n\n```{.r .cell-code}\np + coord_cartesian(xlim = as.Date(c(\"2021-07-01\", \"2022-05-01\")))\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-77-1.png){width=672}\n:::\n:::\n\n\n\n\n\nThis looks okay to my eye, though it does look to be overfitting the training set.\nIt's a shame to not have more data to test a full year -- most of the test set covers winter and spring.^[This is my reminder to myself to come back in fall 2022 to see how the model performs on a full summer season.]\n\nTo investigate the model performance further, I'll plot the biggest outliers in the training and testing set (and ±1 week on either side):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nworst_preds <- xgb_final_preds %>%\n  mutate(abs_error = abs(n_bikes - .pred)) %>%\n  group_by(data_set, site_name) %>%\n  slice_max(abs_error, n = 1) %>%\n  ungroup() %>%\n  select(data_set, site_name, count_date, n_bikes, .pred, abs_error)\n\nsite_colors <- setNames(td_colors$pastel6[1:5], unique(worst_preds$site_name))\n\nworst_preds %>%\n  select(data_set, site_name, count_date) %>%\n  mutate(\n    worst_date = count_date,\n    count_date = map(count_date, ~ seq.Date(.x - 7, .x + 7, by = \"day\"))\n  ) %>%\n  unnest(count_date) %>%\n  left_join(xgb_final_preds,\n            by = c(\"data_set\", \"site_name\", \"count_date\")) %>%\n  filter(!is.na(n_bikes)) %>%\n  mutate(site_name = fct_inorder(site_name)) %>%\n  split(.$site_name) %>%\n  map(\n    ~ ggplot(., aes(x = count_date)) +\n      geom_line(aes(y = n_bikes, color = site_name)) +\n      geom_line(aes(y = .pred), color = \"black\") +\n      geom_vline(aes(xintercept = worst_date), lty = 2) +\n      facet_wrap(~ data_set, scales = \"free_x\", ncol = 2) +\n      dunnr::add_facet_borders() +\n      scale_color_manual(values = site_colors) +\n      scale_x_date(breaks = unique(.$worst_date)) +\n      expand_limits(y = 0) +\n      theme(legend.position = \"none\") +\n      labs(x = NULL, y = NULL,\n           subtitle = .$site_name[[1]])\n  ) %>%\n  reduce(`+`) +\n  plot_layout(ncol = 2)\n```\n\n::: {.cell-output-display}\n![](predicting-bike-ridership-developing-a-model_files/figure-html/unnamed-chunk-79-1.png){width=672}\n:::\n:::\n\n\nRelative to the noise in the data, that doesn't look too bad.\nThe Vernon St site has a series of `n_bikes` = 0 in a row that I'm guessing aren't real (see aside).\nIt was probably an issue with the counter, or maybe some construction on the street halting traffic for that period.\n\n::: {.column-margin}\n\nThe Vernon St site has\n6\ndates with `n_bikes = 0` all in a row:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership %>%\n  filter(site_name == \"Vernon St\", n_bikes == 0) %>%\n  pull(count_date)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2021-11-13\" \"2021-11-14\" \"2021-11-15\" \"2021-11-16\" \"2021-11-17\"\n[6] \"2021-11-18\"\n```\n:::\n:::\n\n\n:::\n\nI also think some of the poor predictions can be explained by missing data.\nFor instance, there are some poor predictions around 2021-11-23, where the model is over-estimating `n_bikes` at a few sites.\nCheck out the weather around that day:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbike_ridership %>%\n  filter(count_date > \"2021-11-20\", count_date < \"2021-11-26\") %>%\n  distinct(count_date, mean_temperature, total_precipitation,\n           speed_max_gust, snow_on_ground) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"wpjfhbthuj\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#wpjfhbthuj .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#wpjfhbthuj .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#wpjfhbthuj .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#wpjfhbthuj .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#wpjfhbthuj .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#wpjfhbthuj .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#wpjfhbthuj .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#wpjfhbthuj .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wpjfhbthuj .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#wpjfhbthuj .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#wpjfhbthuj .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#wpjfhbthuj .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#wpjfhbthuj .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wpjfhbthuj .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#wpjfhbthuj .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#wpjfhbthuj .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wpjfhbthuj .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#wpjfhbthuj .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wpjfhbthuj .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#wpjfhbthuj .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wpjfhbthuj .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#wpjfhbthuj .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#wpjfhbthuj .gt_left {\n  text-align: left;\n}\n\n#wpjfhbthuj .gt_center {\n  text-align: center;\n}\n\n#wpjfhbthuj .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#wpjfhbthuj .gt_font_normal {\n  font-weight: normal;\n}\n\n#wpjfhbthuj .gt_font_bold {\n  font-weight: bold;\n}\n\n#wpjfhbthuj .gt_font_italic {\n  font-style: italic;\n}\n\n#wpjfhbthuj .gt_super {\n  font-size: 65%;\n}\n\n#wpjfhbthuj .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#wpjfhbthuj .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#wpjfhbthuj .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#wpjfhbthuj .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#wpjfhbthuj .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#wpjfhbthuj .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">count_date</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">mean_temperature</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">total_precipitation</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">speed_max_gust</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">snow_on_ground</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">2021-11-21</td>\n<td class=\"gt_row gt_right\">3.2</td>\n<td class=\"gt_row gt_right\">NA</td>\n<td class=\"gt_row gt_right\">NA</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n    <tr><td class=\"gt_row gt_left\">2021-11-22</td>\n<td class=\"gt_row gt_right\">11.1</td>\n<td class=\"gt_row gt_right\">42.2</td>\n<td class=\"gt_row gt_right\">57</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n    <tr><td class=\"gt_row gt_left\">2021-11-23</td>\n<td class=\"gt_row gt_right\">6.1</td>\n<td class=\"gt_row gt_right\">NA</td>\n<td class=\"gt_row gt_right\">41</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">2021-11-24</td>\n<td class=\"gt_row gt_right\">0.1</td>\n<td class=\"gt_row gt_right\">NA</td>\n<td class=\"gt_row gt_right\">43</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n    <tr><td class=\"gt_row gt_left\">2021-11-25</td>\n<td class=\"gt_row gt_right\">3.7</td>\n<td class=\"gt_row gt_right\">NA</td>\n<td class=\"gt_row gt_right\">43</td>\n<td class=\"gt_row gt_right\">1</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nThis happens to be around the time of [a huge rain and wind storm in Nova Scotia](https://globalnews.ca/news/8395034/ns-storm-closures-2021/) that knocked out power for a lot of people.\nThis is seen in the `total_precipitation` on 2021-11-22, but the next day is missing data so, in my pre-processing, it was imputed as 0, which is definitely a poor approximation of the truth.\nIf I impute a large amount of rain (let's say 15mm) for that date, here is how the predictions change:\n\n\n::: {.cell}\n\n```{.r .cell-code}\naugment(\n  extract_workflow(xgb_final_fit),\n  xgb_final_preds %>%\n    filter(count_date == \"2021-11-23\") %>%\n    rename(.pred_old = .pred) %>%\n    mutate(total_precipitation = 15)\n) %>%\n  select(site_name, n_bikes, .pred_old, .pred_new = .pred) %>%\n  gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"ssqigteqqk\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#ssqigteqqk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ssqigteqqk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ssqigteqqk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ssqigteqqk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ssqigteqqk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ssqigteqqk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ssqigteqqk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ssqigteqqk .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ssqigteqqk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ssqigteqqk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ssqigteqqk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ssqigteqqk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ssqigteqqk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ssqigteqqk .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ssqigteqqk .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ssqigteqqk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ssqigteqqk .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ssqigteqqk .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ssqigteqqk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ssqigteqqk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ssqigteqqk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ssqigteqqk .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ssqigteqqk .gt_left {\n  text-align: left;\n}\n\n#ssqigteqqk .gt_center {\n  text-align: center;\n}\n\n#ssqigteqqk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ssqigteqqk .gt_font_normal {\n  font-weight: normal;\n}\n\n#ssqigteqqk .gt_font_bold {\n  font-weight: bold;\n}\n\n#ssqigteqqk .gt_font_italic {\n  font-style: italic;\n}\n\n#ssqigteqqk .gt_super {\n  font-size: 65%;\n}\n\n#ssqigteqqk .gt_two_val_uncert {\n  display: inline-block;\n  line-height: 1em;\n  text-align: right;\n  font-size: 60%;\n  vertical-align: -0.25em;\n  margin-left: 0.1em;\n}\n\n#ssqigteqqk .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#ssqigteqqk .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ssqigteqqk .gt_slash_mark {\n  font-size: 0.7em;\n  line-height: 0.7em;\n  vertical-align: 0.15em;\n}\n\n#ssqigteqqk .gt_fraction_numerator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: 0.45em;\n}\n\n#ssqigteqqk .gt_fraction_denominator {\n  font-size: 0.6em;\n  line-height: 0.6em;\n  vertical-align: -0.05em;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">site_name</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">n_bikes</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">.pred_old</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">.pred_new</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">Dartmouth Harbourfront Greenway</td>\n<td class=\"gt_row gt_right\">30</td>\n<td class=\"gt_row gt_right\">137.51662</td>\n<td class=\"gt_row gt_right\">59.39198</td></tr>\n    <tr><td class=\"gt_row gt_left\">Hollis St</td>\n<td class=\"gt_row gt_right\">19</td>\n<td class=\"gt_row gt_right\">85.97115</td>\n<td class=\"gt_row gt_right\">21.11964</td></tr>\n    <tr><td class=\"gt_row gt_left\">South Park St</td>\n<td class=\"gt_row gt_right\">59</td>\n<td class=\"gt_row gt_right\">315.21432</td>\n<td class=\"gt_row gt_right\">187.37488</td></tr>\n    <tr><td class=\"gt_row gt_left\">Vernon St</td>\n<td class=\"gt_row gt_right\">133</td>\n<td class=\"gt_row gt_right\">169.32935</td>\n<td class=\"gt_row gt_right\">85.16235</td></tr>\n    <tr><td class=\"gt_row gt_left\">Windsor St</td>\n<td class=\"gt_row gt_right\">26</td>\n<td class=\"gt_row gt_right\">95.60495</td>\n<td class=\"gt_row gt_right\">23.89534</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nThat is a much better prediction for a rainy and windy day.\n\n## Conclusions\n\nIn the end, the XGBoost model was able to best predict daily bike ridership.\n\nIs this model useful to anyone? Maybe.\nIs it useful just sitting on my computer? Definitely not.\nSo in [my next post](../2022-05-19-predicting-bike-ridership-deploying-the-model/), I'll put this model into production.\n\n## Reproducibility {.appendix .unlisted}\n\n<details><summary>Session info</summary>\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n setting  value\n version  R version 4.2.1 (2022-06-23 ucrt)\n os       Windows 10 x64 (build 19044)\n system   x86_64, mingw32\n ui       RTerm\n language (EN)\n collate  English_Canada.utf8\n ctype    English_Canada.utf8\n tz       America/Curacao\n date     2022-08-21\n pandoc   2.18 @ C:/Program Files/RStudio/bin/quarto/bin/tools/ (via rmarkdown)\n```\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"\"],\"name\":[\"_rn_\"],\"type\":[\"\"],\"align\":[\"left\"]},{\"label\":[\"package\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ondiskversion\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"loadedversion\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"path\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"loadedpath\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"attached\"],\"name\":[6],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"is_base\"],\"name\":[7],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"date\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"source\"],\"name\":[9],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"md5ok\"],\"name\":[10],\"type\":[\"lgl\"],\"align\":[\"right\"]},{\"label\":[\"library\"],\"name\":[11],\"type\":[\"fct\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"assertthat\",\"2\":\"0.2.1\",\"3\":\"0.2.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/assertthat\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/assertthat\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-03-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"assertthat\"},{\"1\":\"backports\",\"2\":\"1.4.1\",\"3\":\"1.4.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/backports\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/backports\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-12-13\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"backports\"},{\"1\":\"broom\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/broom\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/broom\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-01\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"broom\"},{\"1\":\"cachem\",\"2\":\"1.0.6\",\"3\":\"1.0.6\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cachem\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cachem\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-08-19\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"cachem\"},{\"1\":\"callr\",\"2\":\"3.7.1\",\"3\":\"3.7.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/callr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/callr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"callr\"},{\"1\":\"cellranger\",\"2\":\"1.1.0\",\"3\":\"1.1.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cellranger\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cellranger\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2016-07-27\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"cellranger\"},{\"1\":\"checkmate\",\"2\":\"2.1.0\",\"3\":\"2.1.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/checkmate\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/checkmate\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"checkmate\"},{\"1\":\"class\",\"2\":\"7.3.20\",\"3\":\"7.3-20\",\"4\":\"C:/Program Files/R/R-4.2.1/library/class\",\"5\":\"C:/Program Files/R/R-4.2.1/library/class\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-01-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"class\"},{\"1\":\"cli\",\"2\":\"3.3.0\",\"3\":\"3.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cli\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/cli\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"cli\"},{\"1\":\"codetools\",\"2\":\"0.2.18\",\"3\":\"0.2-18\",\"4\":\"C:/Program Files/R/R-4.2.1/library/codetools\",\"5\":\"C:/Program Files/R/R-4.2.1/library/codetools\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-11-04\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"codetools\"},{\"1\":\"colorspace\",\"2\":\"2.0.3\",\"3\":\"2.0-3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/colorspace\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/colorspace\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"colorspace\"},{\"1\":\"crayon\",\"2\":\"1.5.1\",\"3\":\"1.5.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/crayon\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/crayon\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-26\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"crayon\"},{\"1\":\"data.table\",\"2\":\"1.14.2\",\"3\":\"1.14.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/data.table\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/data.table\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-27\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"data.table\"},{\"1\":\"DBI\",\"2\":\"1.1.3\",\"3\":\"1.1.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/DBI\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/DBI\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"DBI\"},{\"1\":\"dbplyr\",\"2\":\"2.2.1\",\"3\":\"2.2.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dbplyr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dbplyr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-27\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"dbplyr\"},{\"1\":\"devtools\",\"2\":\"2.4.4\",\"3\":\"2.4.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/devtools\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/devtools\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-20\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"devtools\"},{\"1\":\"dials\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dials\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dials\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-06-14\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"dials\"},{\"1\":\"DiceDesign\",\"2\":\"1.9\",\"3\":\"1.9\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/DiceDesign\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/DiceDesign\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-02-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"DiceDesign\"},{\"1\":\"digest\",\"2\":\"0.6.29\",\"3\":\"0.6.29\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/digest\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/digest\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-12-01\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"digest\"},{\"1\":\"distill\",\"2\":\"1.4\",\"3\":\"1.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/distill\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/distill\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-12\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"distill\"},{\"1\":\"doParallel\",\"2\":\"1.0.17\",\"3\":\"1.0.17\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/doParallel\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/doParallel\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-02-07\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"doParallel\"},{\"1\":\"downlit\",\"2\":\"0.4.2\",\"3\":\"0.4.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/downlit\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/downlit\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"downlit\"},{\"1\":\"dplyr\",\"2\":\"1.0.9\",\"3\":\"1.0.9\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dplyr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dplyr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-04-28\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"dplyr\"},{\"1\":\"dunnr\",\"2\":\"0.2.6\",\"3\":\"0.2.6\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dunnr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/dunnr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-08-07\",\"9\":\"Github (taylordunn/dunnr@e2a82136012b9edae43fc5f8e728492125366267)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"dunnr\"},{\"1\":\"ellipsis\",\"2\":\"0.3.2\",\"3\":\"0.3.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ellipsis\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ellipsis\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-04-29\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ellipsis\"},{\"1\":\"evaluate\",\"2\":\"0.15\",\"3\":\"0.15\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/evaluate\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/evaluate\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"evaluate\"},{\"1\":\"extrafont\",\"2\":\"0.18\",\"3\":\"0.18\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/extrafont\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/extrafont\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-12\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"extrafont\"},{\"1\":\"extrafontdb\",\"2\":\"1.0\",\"3\":\"1.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/extrafontdb\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/extrafontdb\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2012-06-11\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"extrafontdb\"},{\"1\":\"fansi\",\"2\":\"1.0.3\",\"3\":\"1.0.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fansi\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fansi\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"fansi\"},{\"1\":\"farver\",\"2\":\"2.1.1\",\"3\":\"2.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/farver\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/farver\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-06\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"farver\"},{\"1\":\"fastmap\",\"2\":\"1.1.0\",\"3\":\"1.1.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fastmap\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fastmap\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-01-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"fastmap\"},{\"1\":\"forcats\",\"2\":\"0.5.1\",\"3\":\"0.5.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/forcats\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/forcats\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2021-01-27\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"forcats\"},{\"1\":\"foreach\",\"2\":\"1.5.2\",\"3\":\"1.5.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/foreach\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/foreach\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-02-02\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"foreach\"},{\"1\":\"fs\",\"2\":\"1.5.2\",\"3\":\"1.5.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fs\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/fs\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-12-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"fs\"},{\"1\":\"furrr\",\"2\":\"0.3.0\",\"3\":\"0.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/furrr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/furrr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-04\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"furrr\"},{\"1\":\"future\",\"2\":\"1.27.0\",\"3\":\"1.27.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/future\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/future\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"future\"},{\"1\":\"future.apply\",\"2\":\"1.9.0\",\"3\":\"1.9.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/future.apply\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/future.apply\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"future.apply\"},{\"1\":\"gargle\",\"2\":\"1.2.0\",\"3\":\"1.2.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gargle\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gargle\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-07-02\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"gargle\"},{\"1\":\"generics\",\"2\":\"0.1.3\",\"3\":\"0.1.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/generics\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/generics\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"generics\"},{\"1\":\"ggplot2\",\"2\":\"3.3.6\",\"3\":\"3.3.6\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ggplot2\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ggplot2\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-05-03\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ggplot2\"},{\"1\":\"ggrepel\",\"2\":\"0.9.1\",\"3\":\"0.9.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ggrepel\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ggrepel\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-01-15\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ggrepel\"},{\"1\":\"globals\",\"2\":\"0.15.1\",\"3\":\"0.15.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/globals\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/globals\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"globals\"},{\"1\":\"glue\",\"2\":\"1.6.2\",\"3\":\"1.6.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/glue\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/glue\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"glue\"},{\"1\":\"googledrive\",\"2\":\"2.0.0\",\"3\":\"2.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/googledrive\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/googledrive\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-07-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"googledrive\"},{\"1\":\"googlesheets4\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/googlesheets4\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/googlesheets4\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-07-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"googlesheets4\"},{\"1\":\"gower\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gower\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gower\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-03\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"gower\"},{\"1\":\"GPfit\",\"2\":\"1.0.8\",\"3\":\"1.0-8\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/GPfit\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/GPfit\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-02-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"GPfit\"},{\"1\":\"gridExtra\",\"2\":\"2.3\",\"3\":\"2.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gridExtra\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gridExtra\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2017-09-09\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"gridExtra\"},{\"1\":\"gt\",\"2\":\"0.6.0\",\"3\":\"0.6.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gt\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gt\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-05-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"gt\"},{\"1\":\"gtable\",\"2\":\"0.3.0\",\"3\":\"0.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gtable\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/gtable\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-03-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"gtable\"},{\"1\":\"hardhat\",\"2\":\"1.2.0\",\"3\":\"1.2.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/hardhat\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/hardhat\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"hardhat\"},{\"1\":\"haven\",\"2\":\"2.5.0\",\"3\":\"2.5.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/haven\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/haven\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-15\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"haven\"},{\"1\":\"hms\",\"2\":\"1.1.1\",\"3\":\"1.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/hms\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/hms\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-26\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"hms\"},{\"1\":\"htmltools\",\"2\":\"0.5.2\",\"3\":\"0.5.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/htmltools\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/htmltools\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-08-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"htmltools\"},{\"1\":\"htmlwidgets\",\"2\":\"1.5.4\",\"3\":\"1.5.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/htmlwidgets\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/htmlwidgets\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"htmlwidgets\"},{\"1\":\"httpuv\",\"2\":\"1.6.5\",\"3\":\"1.6.5\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/httpuv\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/httpuv\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-01-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"httpuv\"},{\"1\":\"httr\",\"2\":\"1.4.3\",\"3\":\"1.4.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/httr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/httr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-04\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"httr\"},{\"1\":\"infer\",\"2\":\"1.0.2\",\"3\":\"1.0.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/infer\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/infer\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-06-10\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"infer\"},{\"1\":\"ipred\",\"2\":\"0.9.13\",\"3\":\"0.9-13\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ipred\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ipred\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-02\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ipred\"},{\"1\":\"iterators\",\"2\":\"1.0.14\",\"3\":\"1.0.14\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/iterators\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/iterators\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-02-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"iterators\"},{\"1\":\"jsonlite\",\"2\":\"1.8.0\",\"3\":\"1.8.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/jsonlite\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/jsonlite\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"jsonlite\"},{\"1\":\"kernlab\",\"2\":\"0.9.31\",\"3\":\"0.9-31\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/kernlab\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/kernlab\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-09\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"kernlab\"},{\"1\":\"knitr\",\"2\":\"1.39\",\"3\":\"1.39\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/knitr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/knitr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-26\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"knitr\"},{\"1\":\"labeling\",\"2\":\"0.4.2\",\"3\":\"0.4.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/labeling\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/labeling\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-10-20\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"labeling\"},{\"1\":\"later\",\"2\":\"1.3.0\",\"3\":\"1.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/later\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/later\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-08-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"later\"},{\"1\":\"lattice\",\"2\":\"0.20.45\",\"3\":\"0.20-45\",\"4\":\"C:/Program Files/R/R-4.2.1/library/lattice\",\"5\":\"C:/Program Files/R/R-4.2.1/library/lattice\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"lattice\"},{\"1\":\"lava\",\"2\":\"1.6.10\",\"3\":\"1.6.10\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lava\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lava\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-02\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"lava\"},{\"1\":\"lhs\",\"2\":\"1.1.5\",\"3\":\"1.1.5\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lhs\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lhs\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"lhs\"},{\"1\":\"lifecycle\",\"2\":\"1.0.1\",\"3\":\"1.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lifecycle\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lifecycle\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"lifecycle\"},{\"1\":\"listenv\",\"2\":\"0.8.0\",\"3\":\"0.8.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/listenv\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/listenv\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-12-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"listenv\"},{\"1\":\"lubridate\",\"2\":\"1.8.0\",\"3\":\"1.8.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lubridate\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/lubridate\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-10-07\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"lubridate\"},{\"1\":\"magrittr\",\"2\":\"2.0.3\",\"3\":\"2.0.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/magrittr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/magrittr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"magrittr\"},{\"1\":\"MASS\",\"2\":\"7.3.57\",\"3\":\"7.3-57\",\"4\":\"C:/Program Files/R/R-4.2.1/library/MASS\",\"5\":\"C:/Program Files/R/R-4.2.1/library/MASS\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"MASS\"},{\"1\":\"Matrix\",\"2\":\"1.4.1\",\"3\":\"1.4-1\",\"4\":\"C:/Program Files/R/R-4.2.1/library/Matrix\",\"5\":\"C:/Program Files/R/R-4.2.1/library/Matrix\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-23\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"Matrix\"},{\"1\":\"memoise\",\"2\":\"2.0.1\",\"3\":\"2.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/memoise\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/memoise\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-11-26\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"memoise\"},{\"1\":\"mgcv\",\"2\":\"1.8.40\",\"3\":\"1.8-40\",\"4\":\"C:/Program Files/R/R-4.2.1/library/mgcv\",\"5\":\"C:/Program Files/R/R-4.2.1/library/mgcv\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-03-29\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"mgcv\"},{\"1\":\"mime\",\"2\":\"0.12\",\"3\":\"0.12\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/mime\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/mime\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-09-28\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"mime\"},{\"1\":\"miniUI\",\"2\":\"0.1.1.1\",\"3\":\"0.1.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/miniUI\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/miniUI\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2018-05-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"miniUI\"},{\"1\":\"modeldata\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/modeldata\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/modeldata\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-01\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"modeldata\"},{\"1\":\"modelr\",\"2\":\"0.1.8\",\"3\":\"0.1.8\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/modelr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/modelr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-05-19\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"modelr\"},{\"1\":\"munsell\",\"2\":\"0.5.0\",\"3\":\"0.5.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/munsell\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/munsell\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2018-06-12\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"munsell\"},{\"1\":\"nlme\",\"2\":\"3.1.157\",\"3\":\"3.1-157\",\"4\":\"C:/Program Files/R/R-4.2.1/library/nlme\",\"5\":\"C:/Program Files/R/R-4.2.1/library/nlme\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-03-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"nlme\"},{\"1\":\"nnet\",\"2\":\"7.3.17\",\"3\":\"7.3-17\",\"4\":\"C:/Program Files/R/R-4.2.1/library/nnet\",\"5\":\"C:/Program Files/R/R-4.2.1/library/nnet\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-01-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"nnet\"},{\"1\":\"parallelly\",\"2\":\"1.32.1\",\"3\":\"1.32.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/parallelly\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/parallelly\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"parallelly\"},{\"1\":\"parsnip\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/parsnip\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/parsnip\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-06-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"parsnip\"},{\"1\":\"patchwork\",\"2\":\"1.1.1\",\"3\":\"1.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/patchwork\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/patchwork\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2020-12-17\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"patchwork\"},{\"1\":\"pillar\",\"2\":\"1.8.0\",\"3\":\"1.8.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pillar\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pillar\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"pillar\"},{\"1\":\"pkgbuild\",\"2\":\"1.3.1\",\"3\":\"1.3.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgbuild\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgbuild\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-12-20\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"pkgbuild\"},{\"1\":\"pkgconfig\",\"2\":\"2.0.3\",\"3\":\"2.0.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgconfig\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgconfig\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-09-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"pkgconfig\"},{\"1\":\"pkgload\",\"2\":\"1.3.0\",\"3\":\"1.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgload\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/pkgload\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-27\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"pkgload\"},{\"1\":\"poissonreg\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/poissonreg\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/poissonreg\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-06-15\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"poissonreg\"},{\"1\":\"prettyunits\",\"2\":\"1.1.1\",\"3\":\"1.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/prettyunits\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/prettyunits\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-01-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"prettyunits\"},{\"1\":\"processx\",\"2\":\"3.7.0\",\"3\":\"3.7.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/processx\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/processx\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-07\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"processx\"},{\"1\":\"prodlim\",\"2\":\"2019.11.13\",\"3\":\"2019.11.13\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/prodlim\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/prodlim\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-11-17\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"prodlim\"},{\"1\":\"profvis\",\"2\":\"0.3.7\",\"3\":\"0.3.7\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/profvis\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/profvis\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-11-02\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"profvis\"},{\"1\":\"promises\",\"2\":\"1.2.0.1\",\"3\":\"1.2.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/promises\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/promises\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-02-11\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"promises\"},{\"1\":\"ps\",\"2\":\"1.7.1\",\"3\":\"1.7.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ps\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ps\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ps\"},{\"1\":\"purrr\",\"2\":\"0.3.4\",\"3\":\"0.3.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/purrr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/purrr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2020-04-17\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"purrr\"},{\"1\":\"R6\",\"2\":\"2.5.1\",\"3\":\"2.5.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/R6\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/R6\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-08-19\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"R6\"},{\"1\":\"ragg\",\"2\":\"1.2.2\",\"3\":\"1.2.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ragg\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ragg\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ragg\"},{\"1\":\"ranger\",\"2\":\"0.14.1\",\"3\":\"0.14.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ranger\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/ranger\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-06-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"ranger\"},{\"1\":\"Rcpp\",\"2\":\"1.0.9\",\"3\":\"1.0.9\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/Rcpp\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/Rcpp\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"Rcpp\"},{\"1\":\"readr\",\"2\":\"2.1.2\",\"3\":\"2.1.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/readr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/readr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-01-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"readr\"},{\"1\":\"readxl\",\"2\":\"1.4.0\",\"3\":\"1.4.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/readxl\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/readxl\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-28\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"readxl\"},{\"1\":\"recipes\",\"2\":\"1.0.1\",\"3\":\"1.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/recipes\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/recipes\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-07\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"recipes\"},{\"1\":\"remotes\",\"2\":\"2.4.2\",\"3\":\"2.4.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/remotes\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/remotes\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-11-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"remotes\"},{\"1\":\"renv\",\"2\":\"0.15.5\",\"3\":\"0.15.5\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/renv\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/renv\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-26\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"renv\"},{\"1\":\"reprex\",\"2\":\"2.0.1\",\"3\":\"2.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/reprex\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/reprex\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-08-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"reprex\"},{\"1\":\"rlang\",\"2\":\"1.0.4\",\"3\":\"1.0.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rlang\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rlang\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-12\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rlang\"},{\"1\":\"rmarkdown\",\"2\":\"2.14\",\"3\":\"2.14\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rmarkdown\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rmarkdown\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rmarkdown\"},{\"1\":\"rpart\",\"2\":\"4.1.16\",\"3\":\"4.1.16\",\"4\":\"C:/Program Files/R/R-4.2.1/library/rpart\",\"5\":\"C:/Program Files/R/R-4.2.1/library/rpart\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-01-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"rpart\"},{\"1\":\"rpart.plot\",\"2\":\"3.1.1\",\"3\":\"3.1.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rpart.plot\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rpart.plot\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rpart.plot\"},{\"1\":\"rsample\",\"2\":\"1.1.0\",\"3\":\"1.1.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rsample\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rsample\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-08-08\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rsample\"},{\"1\":\"rstudioapi\",\"2\":\"0.13\",\"3\":\"0.13\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rstudioapi\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rstudioapi\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-11-12\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rstudioapi\"},{\"1\":\"Rttf2pt1\",\"2\":\"1.3.8\",\"3\":\"1.3.8\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/Rttf2pt1\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/Rttf2pt1\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-01-10\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"Rttf2pt1\"},{\"1\":\"rvest\",\"2\":\"1.0.2\",\"3\":\"1.0.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rvest\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/rvest\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-10-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"rvest\"},{\"1\":\"sass\",\"2\":\"0.4.2\",\"3\":\"0.4.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/sass\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/sass\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"sass\"},{\"1\":\"scales\",\"2\":\"1.2.0\",\"3\":\"1.2.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/scales\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/scales\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-04-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"scales\"},{\"1\":\"sessioninfo\",\"2\":\"1.2.2\",\"3\":\"1.2.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/sessioninfo\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/sessioninfo\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-12-06\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"sessioninfo\"},{\"1\":\"shiny\",\"2\":\"1.7.2\",\"3\":\"1.7.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/shiny\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/shiny\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-19\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"shiny\"},{\"1\":\"slider\",\"2\":\"0.2.2\",\"3\":\"0.2.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/slider\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/slider\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-07-01\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"slider\"},{\"1\":\"stringi\",\"2\":\"1.7.8\",\"3\":\"1.7.8\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/stringi\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/stringi\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-07-11\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"stringi\"},{\"1\":\"stringr\",\"2\":\"1.4.0\",\"3\":\"1.4.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/stringr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/stringr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2019-02-10\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"stringr\"},{\"1\":\"survival\",\"2\":\"3.3.1\",\"3\":\"3.3-1\",\"4\":\"C:/Program Files/R/R-4.2.1/library/survival\",\"5\":\"C:/Program Files/R/R-4.2.1/library/survival\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-03\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"NA\",\"11\":\"C:/Program Files/R/R-4.2.1/library\",\"_rn_\":\"survival\"},{\"1\":\"systemfonts\",\"2\":\"1.0.4\",\"3\":\"1.0.4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/systemfonts\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/systemfonts\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-11\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"systemfonts\"},{\"1\":\"textshaping\",\"2\":\"0.3.6\",\"3\":\"0.3.6\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/textshaping\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/textshaping\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-10-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"textshaping\"},{\"1\":\"tibble\",\"2\":\"3.1.8\",\"3\":\"3.1.8\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tibble\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tibble\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-22\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tibble\"},{\"1\":\"tictoc\",\"2\":\"1.0.1\",\"3\":\"1.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tictoc\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tictoc\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2021-04-19\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tictoc\"},{\"1\":\"tidymodels\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidymodels\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidymodels\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tidymodels\"},{\"1\":\"tidyr\",\"2\":\"1.2.0\",\"3\":\"1.2.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyr\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-02-01\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tidyr\"},{\"1\":\"tidyselect\",\"2\":\"1.1.2\",\"3\":\"1.1.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyselect\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyselect\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tidyselect\"},{\"1\":\"tidyverse\",\"2\":\"1.3.2\",\"3\":\"1.3.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyverse\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tidyverse\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-18\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tidyverse\"},{\"1\":\"timeDate\",\"2\":\"4021.104\",\"3\":\"4021.104\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/timeDate\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/timeDate\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-19\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"timeDate\"},{\"1\":\"tune\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tune\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tune\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-07\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tune\"},{\"1\":\"tzdb\",\"2\":\"0.3.0\",\"3\":\"0.3.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tzdb\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/tzdb\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-28\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"tzdb\"},{\"1\":\"urlchecker\",\"2\":\"1.0.1\",\"3\":\"1.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/urlchecker\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/urlchecker\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-11-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"urlchecker\"},{\"1\":\"usethis\",\"2\":\"2.1.6\",\"3\":\"2.1.6\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/usethis\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/usethis\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-25\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"usethis\"},{\"1\":\"utf8\",\"2\":\"1.2.2\",\"3\":\"1.2.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/utf8\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/utf8\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-07-24\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"utf8\"},{\"1\":\"vctrs\",\"2\":\"0.4.1\",\"3\":\"0.4.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/vctrs\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/vctrs\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"vctrs\"},{\"1\":\"vip\",\"2\":\"0.3.2\",\"3\":\"0.3.2\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/vip\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/vip\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2020-12-17\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"vip\"},{\"1\":\"viridisLite\",\"2\":\"0.4.0\",\"3\":\"0.4.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/viridisLite\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/viridisLite\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-04-13\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"viridisLite\"},{\"1\":\"warp\",\"2\":\"0.2.0\",\"3\":\"0.2.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/warp\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/warp\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2020-10-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"warp\"},{\"1\":\"withr\",\"2\":\"2.5.0\",\"3\":\"2.5.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/withr\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/withr\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-03-03\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"withr\"},{\"1\":\"workflows\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/workflows\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/workflows\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-05\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"workflows\"},{\"1\":\"workflowsets\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/workflowsets\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/workflowsets\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-07-12\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"workflowsets\"},{\"1\":\"xfun\",\"2\":\"0.31\",\"3\":\"0.31\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xfun\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xfun\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-05-10\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"xfun\"},{\"1\":\"xgboost\",\"2\":\"1.6.0.1\",\"3\":\"1.6.0.1\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xgboost\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xgboost\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-04-16\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"xgboost\"},{\"1\":\"xml2\",\"2\":\"1.3.3\",\"3\":\"1.3.3\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xml2\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xml2\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2021-11-30\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"xml2\"},{\"1\":\"xtable\",\"2\":\"1.8.4\",\"3\":\"1.8-4\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xtable\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/xtable\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2019-04-21\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"xtable\"},{\"1\":\"yaml\",\"2\":\"2.3.5\",\"3\":\"2.3.5\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/yaml\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/yaml\",\"6\":\"FALSE\",\"7\":\"FALSE\",\"8\":\"2022-02-21\",\"9\":\"CRAN (R 4.2.0)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"yaml\"},{\"1\":\"yardstick\",\"2\":\"1.0.0\",\"3\":\"1.0.0\",\"4\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/yardstick\",\"5\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2/yardstick\",\"6\":\"TRUE\",\"7\":\"FALSE\",\"8\":\"2022-06-06\",\"9\":\"CRAN (R 4.2.1)\",\"10\":\"TRUE\",\"11\":\"C:/Users/tdunn/AppData/Local/R/win-library/4.2\",\"_rn_\":\"yardstick\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n</details>\n\n<details><summary>Git repository</summary>\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nLocal:    main C:/Users/tdunn/Documents/tdunn-quarto\nRemote:   main @ origin (https://github.com/taylordunn/tdunn-quarto.git)\nHead:     [cff964f] 2022-08-14: Converted the `predicting-bike-ridership-developing-a-model` post\n```\n:::\n:::\n\n\n</details>\n\n\n<a href=\"https://github.com/taylordunn/tdunn-quarto/tree/main/posts/2022-04-29-predicting-bike-ridership-developing-a-model\">Source code</a>, <a href=\"https://github.com/taylordunn/tdunn-quarto/tree/main/posts/2022-04-29-predicting-bike-ridership-developing-a-model/renv.lock\">R environment</a>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}